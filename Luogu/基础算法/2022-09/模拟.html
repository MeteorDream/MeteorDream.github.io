<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/Whale-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Whale-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Whale-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="-3vYeYUI32tNnZYynn6m9TEd8b35o91ejIEgj9md_1o">
  <meta name="msvalidate.01" content="52EA62B6D6E7019FD9854082F76A21EA">
  <meta name="baidu-site-verification" content="code-AlOkWF1yk4">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-material.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"meteordream.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":250,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="基础算法-模拟 模拟算法就是，题目要求什么你就做什么，主要考察数据结构方面的内容">
<meta property="og:type" content="article">
<meta property="og:title" content="『洛谷』模拟">
<meta property="og:url" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E6%A8%A1%E6%8B%9F.html">
<meta property="og:site_name" content="小鲸鱼的梦境">
<meta property="og:description" content="基础算法-模拟 模拟算法就是，题目要求什么你就做什么，主要考察数据结构方面的内容">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/模拟/100.png">
<meta property="og:image" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/模拟/26.png">
<meta property="og:image" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/模拟/1346.png">
<meta property="og:image" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/模拟/0u7em9pi.png">
<meta property="og:image" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/模拟/3439.png">
<meta property="og:image" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/模拟/58700.png">
<meta property="article:published_time" content="2022-09-12T12:52:12.000Z">
<meta property="article:modified_time" content="2022-09-12T12:52:12.000Z">
<meta property="article:author" content="小鲸鱼">
<meta property="article:tag" content="Luogu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/模拟/100.png">

<link rel="canonical" href="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E6%A8%A1%E6%8B%9F.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>『洛谷』模拟 | 小鲸鱼的梦境</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">小鲸鱼的梦境</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E6%A8%A1%E6%8B%9F.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shizuku.png">
      <meta itemprop="name" content="小鲸鱼">
      <meta itemprop="description" content="小鲸鱼只有七秒钟的记忆">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鲸鱼的梦境">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          『洛谷』模拟
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-09-12 20:52:12" itemprop="dateCreated datePublished" datetime="2022-09-12T20:52:12+08:00">2022-09-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Luogu/" itemprop="url" rel="index"><span itemprop="name">Luogu</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">基础算法</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E6%A8%A1%E6%8B%9F.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E6%A8%A1%E6%8B%9F.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>50k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>46 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="基础算法-模拟">基础算法-模拟</h2>
<p>模拟算法就是，题目要求什么你就做什么，主要考察数据结构方面的内容</p>
<span id="more"></span>
<h2 id="p1003-noip2011-提高组-铺地毯">P1003 [NOIP2011 提高组]
铺地毯</h2>
<h3 id="题目描述">题目描述</h3>
<p>为了准备一个独特的颁奖典礼，组织者在会场的一片矩形区域（可看做是平面直角坐标系的第一象限）铺上一些矩形地毯。一共有
<span class="math inline">\(n\)</span> 张地毯，编号从 <span class="math inline">\(1\)</span> 到 <span class="math inline">\(n\)</span>。现在将这些地毯按照编号从小到大的顺序平行于坐标轴先后铺设，后铺的地毯覆盖在前面已经铺好的地毯之上。</p>
<p>地毯铺设完成后，组织者想知道覆盖地面某个点的最上面的那张地毯的编号。注意：在矩形地毯边界和四个顶点上的点也算被地毯覆盖。</p>
<h3 id="输入格式">输入格式</h3>
<p>输入共 <span class="math inline">\(n + 2\)</span> 行。</p>
<p>第一行，一个整数 <span class="math inline">\(n\)</span>，表示总共有
<span class="math inline">\(n\)</span> 张地毯。</p>
<p>接下来的 <span class="math inline">\(n\)</span> 行中，第 <span class="math inline">\(i+1\)</span> 行表示编号 <span class="math inline">\(i\)</span> 的地毯的信息，包含四个整数 <span class="math inline">\(a ,b ,g
,k\)</span>，每两个整数之间用一个空格隔开，分别表示铺设地毯的左下角的坐标
<span class="math inline">\((a, b)\)</span> 以及地毯在 <span class="math inline">\(x\)</span> 轴和 <span class="math inline">\(y\)</span> 轴方向的长度。</p>
<p>第 <span class="math inline">\(n + 2\)</span> 行包含两个整数 <span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span>，表示所求的地面的点的坐标 <span class="math inline">\((x, y)\)</span>。</p>
<h3 id="输出格式">输出格式</h3>
<p>输出共 <span class="math inline">\(1\)</span>
行，一个整数，表示所求的地毯的编号；若此处没有被地毯覆盖则输出
<code>-1</code>。</p>
<h3 id="输入输出样例">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输入: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>输出: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span></span><br></pre></td></tr></table></figure>
<h3 id="说明提示">说明&amp;提示</h3>
<p>【样例解释 1】</p>
<p>如下图，<span class="math inline">\(1\)</span>
号地毯用实线表示，<span class="math inline">\(2\)</span>
号地毯用虚线表示，<span class="math inline">\(3\)</span>
号用双实线表示，覆盖点 <span class="math inline">\((2,2)\)</span>
的最上面一张地毯是 <span class="math inline">\(3\)</span> 号地毯。</p>
<p><img data-src="模拟/100.png" alt="100.png"></p>
<p>【数据范围】</p>
<p>对于 <span class="math inline">\(30\%\)</span> 的数据，有 <span class="math inline">\(n \le 2\)</span>。<br>
对于 <span class="math inline">\(50\%\)</span> 的数据，<span class="math inline">\(0 \le a, b, g, k \le 100\)</span>。<br>
对于 <span class="math inline">\(100\%\)</span> 的数据，有 <span class="math inline">\(0 \le n \le 10^4\)</span>, <span class="math inline">\(0 \le a, b, g, k \le {10}^5\)</span>。</p>
<h3 id="解题思路">解题思路</h3>
<p>一个简单的思路是，和之前种树那题一样，将二维坐标平面用一个二维数组表示，然后每个地毯都将对应位置修改覆盖，最后可以随意查询任意位置最上层地毯编号，不过呢，这题也就检查一个坐标点地毯编号，没必要这么麻烦，只需盯住那个坐标点铺地毯即，其他坐标的情况完全可以无视掉</p>
<p>还有个优化点就是，从后向前查找，找到第一个覆盖了的地毯就可以返回了</p>
<h3 id="解答代码">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, x, y;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">s</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">4</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> a, b, g, k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;g, &amp;k);</span><br><span class="line">        s[i][<span class="number">0</span>] = a, s[i][<span class="number">1</span>] = b, s[i][<span class="number">2</span>] = g, s[i][<span class="number">3</span>] = k;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i][<span class="number">0</span>] &lt;= x &amp;&amp; s[i][<span class="number">1</span>] &lt;= y &amp;&amp; s[i][<span class="number">0</span>] + s[i][<span class="number">2</span>] &gt;= x &amp;&amp; s[i][<span class="number">1</span>] + s[i][<span class="number">3</span>] &gt;= y)</span><br><span class="line">            ans = i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        <span class="type">int</span>[][] s = <span class="keyword">new</span> <span class="title class_">int</span>[n][<span class="number">4</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            s[i][<span class="number">0</span>] = sc.nextInt();</span><br><span class="line">            s[i][<span class="number">1</span>] = sc.nextInt();</span><br><span class="line">            s[i][<span class="number">2</span>] = sc.nextInt();</span><br><span class="line">            s[i][<span class="number">3</span>] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> sc.nextInt(), y = sc.nextInt();</span><br><span class="line">        sc.close();</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">Main</span>().Crapet(s, x, y));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">Crapet</span><span class="params">(<span class="type">int</span>[][] s, <span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> s.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x &gt;= s[i][<span class="number">0</span>] &amp;&amp; y &gt;= s[i][<span class="number">1</span>] &amp;&amp; x &lt;= s[i][<span class="number">0</span>] + s[i][<span class="number">2</span>] &amp;&amp; y &lt;= s[i][<span class="number">1</span>] + s[i][<span class="number">3</span>])</span><br><span class="line">                <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p1067-noip2009-普及组-多项式输出">P1067 [NOIP2009 普及组]
多项式输出</h2>
<h3 id="题目描述-1">题目描述</h3>
<p>一元<span class="math inline">\(n\)</span>次多项式可用如下的表达式表示：</p>
<p><img data-src="模拟/26.png" alt="26.png"></p>
<p><span class="math display">\[f(x)=a_nx^n+a_{n-1}x^{n-1}+\cdots
+a_1x+a_0,a_n\ne 0\]</span></p>
<p>其中，<span class="math inline">\(a_ix^i\)</span>称为<span class="math inline">\(i\)</span>次项，<span class="math inline">\(a_i\)</span> 称为<span class="math inline">\(i\)</span>次项的系数。给出一个一元多项式各项的次数和系数，请按照如下规定的格式要求输出该多项式：</p>
<ol type="1">
<li><p>多项式中自变量为$
x$，从左到右按照次数递减顺序给出多项式。</p></li>
<li><p>多项式中只包含系数不为<span class="math inline">\(0\)</span>的项。</p></li>
<li><p>如果多项式<span class="math inline">\(n\)</span>次项系数为正，则多项式开头不出现“+”号，如果多项式<span class="math inline">\(n\)</span>次项系数为负，则多项式以“-”号开头。</p></li>
<li><p>对于不是最高次的项，以“+”号或者“-”号连接此项与前一项，分别表示此项系数为正或者系数为负。紧跟一个正整数，表示此项系数的绝对值（如果一个高于<span class="math inline">\(0\)</span>次的项，其系数的绝对值为<span class="math inline">\(1\)</span>，则无需输出 <span class="math inline">\(1\)</span>）。如果<span class="math inline">\(x\)</span>的指数大于<span class="math inline">\(1\)</span>，则接下来紧跟的指数部分的形式为“<span class="math inline">\(x^b\)</span>”，其中 <span class="math inline">\(b\)</span> 为 <span class="math inline">\(x\)</span> 的指数；如果 <span class="math inline">\(x\)</span> 的指数为<span class="math inline">\(1\)</span>，则接下来紧跟的指数部分形式为“<span class="math inline">\(x\)</span>”；如果 <span class="math inline">\(x\)</span> 的指数为$
0$，则仅需输出系数即可。</p></li>
<li><p>多项式中，多项式的开头、结尾不含多余的空格。</p></li>
</ol>
<h3 id="输入格式-1">输入格式</h3>
<p>输入共有 <span class="math inline">\(2\)</span> 行</p>
<p>第一行$ 1$ 个整数，<span class="math inline">\(n\)</span>，表示一元多项式的次数。</p>
<p>第二行有 $n+1 <span class="math inline">\(个整数，其中第\)</span> i
<span class="math inline">\(个整数表示第\)</span> n-i+1$
次项的系数，每两个整数之间用空格隔开。</p>
<h3 id="输出格式-1">输出格式</h3>
<p>输出共 <span class="math inline">\(1\)</span>
行，按题目所述格式输出多项式。</p>
<h3 id="输入输出样例-1">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span> </span><br><span class="line"><span class="number">100</span> <span class="number">-1</span> <span class="number">1</span> <span class="number">-3</span> <span class="number">0</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">100</span>x^<span class="number">5</span>-x^<span class="number">4</span>+x^<span class="number">3</span><span class="number">-3</span>x^<span class="number">2</span><span class="number">+10</span></span><br></pre></td></tr></table></figure>
<p>输入: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="number">-50</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span> </span><br></pre></td></tr></table></figure>
<p>输出: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-50</span>x^<span class="number">3</span><span class="number">+1</span> </span><br></pre></td></tr></table></figure>
<h3 id="说明提示-1">说明&amp;提示</h3>
<p>对于100%数据，<span class="math inline">\(0 \le n \le
100\)</span>,$-100 <span class="math inline">\(系数\)</span> $</p>
<h3 id="解题思路-1">解题思路</h3>
<p>模拟即可, 分情况讨论即可，一些细节见代码注释</p>
<h3 id="解答代码-1">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, a;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="type">bool</span> first = <span class="literal">true</span>;    <span class="comment">// 标志是否是输出中的第一项</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a);</span><br><span class="line">        <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="comment">// 系数部分</span></span><br><span class="line">        <span class="keyword">if</span> (first) &#123; <span class="comment">// 第一项，特殊之处在于正数前面不用加 + 号</span></span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">-1</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (a != <span class="number">1</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, a);</span><br><span class="line">            first = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (a &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a != <span class="number">-1</span>)</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">&quot;-&quot;</span>);  <span class="comment">// -1 前面只要一个负号也是易忽略的点</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (a != <span class="number">1</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;+%d&quot;</span>, a);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 指数部分</span></span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;x^%d&quot;</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 指数为 0 的且系数是 +1, -1 的要补上个 1</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">0</span> &amp;&amp; (a == <span class="number">1</span> || a == <span class="number">-1</span>))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (first) <span class="built_in">printf</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">first</span> <span class="operator">=</span> <span class="literal">true</span>; <span class="comment">// 标志是否是输出中的第一项</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">            <span class="keyword">if</span> (a == <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="comment">// 系数部分</span></span><br><span class="line">            <span class="keyword">if</span> (first) &#123; <span class="comment">// 第一项，特殊之处在于正数前面不用加 + 号</span></span><br><span class="line">                <span class="keyword">if</span> (a == -<span class="number">1</span>)</span><br><span class="line">                    System.out.printf(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (a != <span class="number">1</span>)</span><br><span class="line">                    System.out.printf(<span class="string">&quot;%d&quot;</span>, a);</span><br><span class="line">                first = <span class="literal">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (a &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a != -<span class="number">1</span>)</span><br><span class="line">                        System.out.printf(<span class="string">&quot;%d&quot;</span>, a);</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        System.out.printf(<span class="string">&quot;-&quot;</span>); <span class="comment">// -1 前面只要一个负号也是易忽略的点</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a != <span class="number">1</span>)</span><br><span class="line">                    System.out.printf(<span class="string">&quot;+%d&quot;</span>, a);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    System.out.printf(<span class="string">&quot;+&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 指数部分</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.printf(<span class="string">&quot;x^%d&quot;</span>, i);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.printf(<span class="string">&quot;x&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 指数为 0 的且系数是 +1, -1 的要补上个 1</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="number">0</span> &amp;&amp; (a == <span class="number">1</span> || a == -<span class="number">1</span>))</span><br><span class="line">                System.out.printf(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (first)</span><br><span class="line">            System.out.printf(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p1328-noip2014-提高组-生活大爆炸版石头剪刀布">P1328 [NOIP2014
提高组] 生活大爆炸版石头剪刀布</h2>
<h3 id="题目描述-2">题目描述</h3>
<p>石头剪刀布是常见的猜拳游戏:石头胜剪刀,剪刀胜布,布胜石头。如果两个人出拳一
样，则不分胜负。在《生活大爆炸》第二季第8集中出现了一种石头剪刀布的升级版游戏。</p>
<p>升级版游戏在传统的石头剪刀布游戏的基础上,增加了两个新手势:</p>
<p>斯波克:《星际迷航》主角之一。</p>
<p>蜥蜴人:《星际迷航》中的反面角色。</p>
<p>这五种手势的胜负关系如表一所示,表中列出的是甲对乙的游戏结果。</p>
<p><img data-src="模拟/1346.png" alt="1346.png"></p>
<p>现在,<code>小 A</code>和<code>小 B</code>尝试玩这种升级版的猜拳游戏。已知他们的出拳都是有周期性规律的，但周期长度不一定相等。例如：如果<code>小A</code>以“石头-布-石头-剪刀-蜥蜴人-斯波克”长度为
<span class="math inline">\(6\)</span>
的周期出拳,那么他的出拳序列就是“石头-布-石头-剪刀-蜥蜴人-斯波克-石头-布-石头-剪刀-蜥蜴人-斯波克-......”,而如果<code>小B</code>以“剪刀-石头-布-斯波克-蜥蜴人”长度为
<span class="math inline">\(5\)</span>
的周期出拳,那么他出拳的序列就是“剪刀-石头-布-斯波克-蜥蜴人-剪刀-石头-布-斯波克-蜥蜴人-......”</p>
<p>已知<code>小 A</code>和<code>小 B</code> 一共进行 <span class="math inline">\(N\)</span> 次猜拳。每一次赢的人得 <span class="math inline">\(1\)</span> 分，输的得 <span class="math inline">\(0\)</span> 分；平局两人都得 <span class="math inline">\(0\)</span> 分。现请你统计 <span class="math inline">\(N\)</span> 次猜拳结束之后两人的得分。</p>
<h3 id="输入格式-2">输入格式</h3>
<p>第一行包含三个整数：<span class="math inline">\(N,N_A,N_B\)</span>,分别表示共进行 <span class="math inline">\(N\)</span>
次猜拳、<code>小 A</code>出拳的周期长度，<code>小 B</code>
出拳的周期长度。数与数之间以一个空格分隔。</p>
<p>第二行包含 <span class="math inline">\(N_A\)</span>
个整数,表示<code>小 A</code>出拳的规律,第三行包含 <span class="math inline">\(N_B\)</span> 个整数,表示<code>小 B</code>
出拳的规律。其中，<span class="math inline">\(0\)</span>
表示“剪刀”，<span class="math inline">\(1\)</span> 表示“石头”，<span class="math inline">\(2\)</span> 表示“布”，<span class="math inline">\(3\)</span> 表示“蜥蜴人”，<span class="math inline">\(4\)</span>
表示“斯波克”。数与数之间以一个空格分隔。</p>
<h3 id="输出格式-2">输出格式</h3>
<p>输出一行，包含两个整数，以一个空格分隔，分别表示<code>小 A</code>、<code>小 B</code>的得分.</p>
<h3 id="输入输出样例-2">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">0</span> <span class="number">3</span> <span class="number">4</span> <span class="number">2</span> <span class="number">1</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>输入: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9</span> <span class="number">5</span> <span class="number">5</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="number">3</span> <span class="number">2</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>输出: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>
<h3 id="说明提示-2">说明&amp;提示</h3>
<p>对于<span class="math inline">\(100\%\)</span>的数据，<span class="math inline">\(0 &lt; N \leq 200, 0 &lt; N_A \leq 200, 0 &lt; N_B
\leq 200\)</span> 。</p>
<h3 id="解题思路-2">解题思路</h3>
<p>没什么技巧，就遍历两人的猜拳过程然后计分即可</p>
<p>一个优化点就是，两人的出拳是周期的，自然胜负也是周期性的，即得分同样具有周期性，不难想到，得分的最小周期即两人出拳周期的最小公倍数，可以由此简化计算，不过本题游戏次数和两人的出拳周期大小相当，所以优化前后效果相差不大，若游戏次数比周期大得多，这个优化就能大大减少计算次数</p>
<p>真值表(a对b的结果，1 表示赢，-1 表示输，0 表示平)</p>
<table>
<thead>
<tr>
<th style="text-align: center;">a 0</th>
<th style="text-align: center;">1</th>
<th style="text-align: center;">2</th>
<th style="text-align: center;">3</th>
<th style="text-align: center;">4</th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">-1</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">-1</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;">3</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td style="text-align: center;">4</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">-1</td>
<td style="text-align: center;">0</td>
</tr>
</tbody>
</table>
<h3 id="解答代码-2">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">game</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// a 胜利返回 1, b 胜利返回 -1，平局返回 0</span></span><br><span class="line">    <span class="keyword">if</span> (a == b)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">2</span> || b == <span class="number">3</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">0</span> || b == <span class="number">3</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">1</span> || b == <span class="number">4</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">2</span> || b == <span class="number">4</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">4</span>)</span><br><span class="line">        <span class="keyword">return</span> b == <span class="number">0</span> || b == <span class="number">1</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">207</span>], b[<span class="number">207</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, na, nb, p, q;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;na, &amp;nb);</span><br><span class="line">    <span class="type">int</span> ca = <span class="number">0</span>, cb = <span class="number">0</span>;    <span class="comment">// 计分</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; na; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;p);</span><br><span class="line">        a[i] = p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nb; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;q);</span><br><span class="line">        b[i] = q;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> res = <span class="built_in">game</span>(a[i % na], b[i % nb]);</span><br><span class="line">        <span class="keyword">if</span> (res == <span class="number">1</span>) ca++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (res == <span class="number">-1</span>)</span><br><span class="line">            cb++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>, ca, cb);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">Main</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Main</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt(), na = sc.nextInt(), nb = sc.nextInt();</span><br><span class="line">        <span class="type">int</span>[] sa = <span class="keyword">new</span> <span class="title class_">int</span>[na], sb = <span class="keyword">new</span> <span class="title class_">int</span>[nb];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; na; ++i) &#123;</span><br><span class="line">            sa[i] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nb; ++i) &#123;</span><br><span class="line">            sb[i] = sc.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] ans = s.game(n, sa, sb);</span><br><span class="line">        System.out.println(ans[<span class="number">0</span>] + <span class="string">&quot; &quot;</span> + ans[<span class="number">1</span>]);</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] game(<span class="type">int</span> n, <span class="type">int</span>[] playerA, <span class="type">int</span>[] playerB) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> playerA.length, n2 = playerB.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> lcm(n1, n2);</span><br><span class="line">        <span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> n / r, m = n % r;</span><br><span class="line">        <span class="type">int</span>[] score = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (playerA[i % n1] == playerB[i % n2])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (RPSSL(playerA[i % n1], playerB[i % n2]))</span><br><span class="line">                score[<span class="number">0</span>]++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                score[<span class="number">1</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (d == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> score;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> score[<span class="number">0</span>], b = score[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> m; i &lt; r; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (playerA[i % n1] == playerB[i % n2])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (RPSSL(playerA[i % n1], playerB[i % n2]))</span><br><span class="line">                a++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                b++;</span><br><span class="line">        &#125;</span><br><span class="line">        score[<span class="number">0</span>] += a * d;</span><br><span class="line">        score[<span class="number">1</span>] += b * d;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">RPSSL</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="comment">// a 胜利返回 true, b 胜利返回 false</span></span><br><span class="line">        <span class="keyword">if</span> (a == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> b == <span class="number">2</span> || b == <span class="number">3</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> b == <span class="number">0</span> || b == <span class="number">3</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">2</span>)</span><br><span class="line">            <span class="keyword">return</span> b == <span class="number">1</span> || b == <span class="number">4</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">3</span>)</span><br><span class="line">            <span class="keyword">return</span> b == <span class="number">2</span> || b == <span class="number">4</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="number">4</span>)</span><br><span class="line">            <span class="keyword">return</span> b == <span class="number">0</span> || b == <span class="number">1</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">gcd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="comment">// 计算两个数的最大公约数</span></span><br><span class="line">        <span class="keyword">while</span> (b != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> a % b;</span><br><span class="line">            a = b;</span><br><span class="line">            b = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">lcm</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="comment">// 计算两个数的最小公倍数</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">g</span> <span class="operator">=</span> gcd(a, b);</span><br><span class="line">        <span class="keyword">return</span> g * (a / g) * (b / g);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面这个py代码本地运行两个示例都能通过，但不知道为什么洛谷会报错，也不给错误信息，就提示
RE，我也不知道哪出问题了（逐行debug发现，math库 的 lcm 是 Python 3.9
版本的功能，洛谷的Python版本较低）, Python 3.9
原版的代码注释掉了，修改后的代码可以通过测试</p>
<p>当然，为了写法上的方便性稍微牺牲了一点效率，但不影响时空复杂度，例如四个
<code>sum</code> 的操作其实一次遍历就能完成，两个数组也可以循环跑</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from math import lcm</span></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> gcd</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">game</span>(<span class="params">a: <span class="built_in">int</span>, b: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="comment"># a 胜利返回 1, b 胜利返回 -1，平局返回 0</span></span><br><span class="line">    <span class="keyword">if</span> a == b:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> a == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> b == <span class="number">2</span> <span class="keyword">or</span> b == <span class="number">3</span> <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> a == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> b == <span class="number">0</span> <span class="keyword">or</span> b == <span class="number">3</span> <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> a == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> b == <span class="number">1</span> <span class="keyword">or</span> b == <span class="number">4</span> <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> a == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> b == <span class="number">2</span> <span class="keyword">or</span> b == <span class="number">4</span> <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> a == <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> b == <span class="number">0</span> <span class="keyword">or</span> b == <span class="number">1</span> <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">n, na, nb = <span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())</span><br><span class="line"></span><br><span class="line"><span class="comment"># r = lcm(na, nb)</span></span><br><span class="line">g = gcd(na, nb)</span><br><span class="line">r = g * (na // g) * (nb // g)</span><br><span class="line"></span><br><span class="line">a, b = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())) * (r // na), <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())) * (r // nb)</span><br><span class="line">tim, k = <span class="built_in">divmod</span>(n, r)</span><br><span class="line">sa = <span class="built_in">sum</span>((<span class="number">1</span> <span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(a, b) <span class="keyword">if</span> game(x, y) == <span class="number">1</span>))</span><br><span class="line">sb = <span class="built_in">sum</span>((<span class="number">1</span> <span class="keyword">for</span> x, y <span class="keyword">in</span> <span class="built_in">zip</span>(a, b) <span class="keyword">if</span> game(x, y) == -<span class="number">1</span>))</span><br><span class="line">ca = <span class="built_in">sum</span>((<span class="number">1</span> <span class="keyword">for</span> x, y, _ <span class="keyword">in</span> <span class="built_in">zip</span>(a, b, <span class="built_in">range</span>(k)) <span class="keyword">if</span> game(x, y) == <span class="number">1</span>))</span><br><span class="line">cb = <span class="built_in">sum</span>((<span class="number">1</span> <span class="keyword">for</span> x, y, _ <span class="keyword">in</span> <span class="built_in">zip</span>(a, b, <span class="built_in">range</span>(k)) <span class="keyword">if</span> game(x, y) == -<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>.<span class="built_in">format</span>(sa * tim + ca, sb * tim + cb))</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p1563-noip2016-提高组-玩具谜题">P1563 [NOIP2016 提高组]
玩具谜题</h2>
<h3 id="题目描述-3">题目描述</h3>
<p>小南有一套可爱的玩具小人, 它们各有不同的职业。</p>
<p>有一天, 这些玩具小人把小南的眼镜藏了起来。
小南发现玩具小人们围成了一个圈,它们有的面朝圈内,有的面朝圈外。如下图:</p>
<p><img data-src="模拟/0u7em9pi.png" alt="0u7em9pi.png"></p>
<p>这时<span class="math inline">\(singer\)</span>告诉小南一个谜題:
“眼镜藏在我左数第3个玩具小人的右数第<span class="math inline">\(1\)</span>个玩具小人的左数第<span class="math inline">\(2\)</span>个玩具小人那里。 ”</p>
<p>小南发现, 这个谜题中玩具小人的朝向非常关键,
因为朝内和朝外的玩具小人的左右方向是相反的: 面朝圈内的玩具小人,
它的左边是顺时针方向, 右边是逆时针方向; 而面向圈外的玩具小人,
它的左边是逆时针方向, 右边是顺时针方向。</p>
<p>小南一边艰难地辨认着玩具小人, 一边数着:</p>
<p><span class="math inline">\(singer\)</span>朝内, 左数第<span class="math inline">\(3\)</span>个是<span class="math inline">\(archer\)</span>。</p>
<p><span class="math inline">\(archer\)</span>朝外,右数第<span class="math inline">\(1\)</span>个是<span class="math inline">\(thinker\)</span>。</p>
<p><span class="math inline">\(thinker\)</span>朝外, 左数第<span class="math inline">\(2\)</span>个是<span class="math inline">\(write\)</span>r。</p>
<p>所以眼镜藏在<span class="math inline">\(writer\)</span>这里!</p>
<p>虽然成功找回了眼镜, 但小南并没有放心。
如果下次有更多的玩具小人藏他的眼镜, 或是谜題的长度更长,
他可能就无法找到眼镜了 。 所以小南希望你写程序帮他解决类似的谜題。
这样的谜題具体可以描述为:</p>
<p>有 <span class="math inline">\(n\)</span>个玩具小人围成一圈,
已知它们的职业和朝向。现在第<span class="math inline">\(1\)</span>个玩具小人告诉小南一个包含<span class="math inline">\(m\)</span>条指令的谜題, 其中第 <span class="math inline">\(z\)</span>条指令形如“左数/右数第$ s$,个玩具小人”。
你需要输出依次数完这些指令后,到达的玩具小人的职业。</p>
<h3 id="输入格式-3">输入格式</h3>
<p>输入的第一行包含两个正整数 <span class="math inline">\(n,m\)</span>，表示玩具小人的个数和指令的条数。</p>
<p>接下来 <span class="math inline">\(n\)</span>
行，每行包含一个整数和一个字符串，以逆时针为顺序给出每个玩具小人的朝向和职业。其中
<span class="math inline">\(0\)</span> 表示朝向圈内，<span class="math inline">\(1\)</span> 表示朝向圈外。
保证不会出现其他的数。字符串长度不超过 <span class="math inline">\(10\)</span>
且仅由小写字母构成，字符串不为空，并且字符串两两不同。整数和字符串之间用一个空格隔开。</p>
<p>接下来 <span class="math inline">\(m\)</span> 行，其中第 <span class="math inline">\(i\)</span> 行包含两个整数 <span class="math inline">\(a_i,s_i\)</span>，表示第 <span class="math inline">\(i\)</span> 条指令。若 <span class="math inline">\(a_i=0\)</span>，表示向左数 <span class="math inline">\(s_i\)</span> 个人；若 <span class="math inline">\(a_i=1\)</span>，表示向右数 <span class="math inline">\(s_i\)</span> 个人。 保证 <span class="math inline">\(a_i\)</span> 不会出现其他的数，<span class="math inline">\(1 \le s_i &lt; n\)</span>。</p>
<h3 id="输出格式-3">输出格式</h3>
<p>输出一个字符串，表示从第一个读入的小人开始，依次数完 <span class="math inline">\(m\)</span> 条指令后到达的小人的职业。</p>
<h3 id="输入输出样例-3">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">7</span> <span class="number">3</span></span><br><span class="line"><span class="number">0</span> singer</span><br><span class="line"><span class="number">0</span> reader</span><br><span class="line"><span class="number">0</span> mengbier </span><br><span class="line"><span class="number">1</span> thinker</span><br><span class="line"><span class="number">1</span> archer</span><br><span class="line"><span class="number">0</span> writer</span><br><span class="line"><span class="number">1</span> mogician </span><br><span class="line"><span class="number">0</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">0</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writer</span><br></pre></td></tr></table></figure>
<p>输入: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> <span class="number">10</span></span><br><span class="line"><span class="number">1</span> C</span><br><span class="line"><span class="number">0</span> r</span><br><span class="line"><span class="number">0</span> P</span><br><span class="line"><span class="number">1</span> d</span><br><span class="line"><span class="number">1</span> e</span><br><span class="line"><span class="number">1</span> m</span><br><span class="line"><span class="number">1</span> t</span><br><span class="line"><span class="number">1</span> y</span><br><span class="line"><span class="number">1</span> u</span><br><span class="line"><span class="number">0</span> V</span><br><span class="line"><span class="number">1</span> <span class="number">7</span></span><br><span class="line"><span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="number">4</span></span><br><span class="line"><span class="number">0</span> <span class="number">5</span></span><br><span class="line"><span class="number">0</span> <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="number">6</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">0</span> <span class="number">8</span></span><br><span class="line"><span class="number">0</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>输出: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y</span><br></pre></td></tr></table></figure>
<h3 id="说明提示-3">说明&amp;提示</h3>
<p>【样例1说明】</p>
<p>这组数据就是【题目描述】 中提到的例子。</p>
<p>【子任务】</p>
<p>子任务会给出部分测试数据的特点。 如果你在解决题目中遇到了困难,
可以尝试只解决一部分测试数据。</p>
<p>每个测试点的数据规模及特点如下表:</p>
<p><img data-src="模拟/3439.png" alt="3439.png"></p>
<p>其中一些简写的列意义如下:</p>
<p>• 全朝内: 若为“√”, 表示该测试点保证所有的玩具小人都朝向圈内;</p>
<p>全左数:若为“√”,表示该测试点保证所有的指令都向左数,即对任意的</p>
<p><span class="math inline">\(1≤z≤m, a_i=0\)</span>;</p>
<p><span class="math inline">\(s=
1\)</span>:若为“√”,表示该测试点保证所有的指令都只数1个,即对任意的</p>
<p><span class="math inline">\(1≤z≤m,s_i=1\)</span>;</p>
<p>职业长度为<span class="math inline">\(1\)</span>
:若为“√”,表示该测试点保证所有玩具小人的职业一定是一个</p>
<p>长度为<span class="math inline">\(1\)</span>的字符串。</p>
<h3 id="解题思路-3">解题思路</h3>
<p>围成一个圈？范围数组时下标取余即可,其余的按题意模拟即可，一个比较麻烦的地方在于顺时针逆时针分清楚方向即可</p>
<h3 id="解答代码-3">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> dir[<span class="number">100007</span>];</span><br><span class="line">string prof[<span class="number">100007</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">next</span><span class="params">(<span class="type">int</span> cur, <span class="type">int</span> d, <span class="type">int</span> dir, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 当前位置 cur, 小人朝向 d, 方向 dir, 第 i 个</span></span><br><span class="line">    <span class="comment">// 小人位置在数组中是逆时针的，所以逆序是顺时针方向</span></span><br><span class="line">    <span class="comment">// d = 0 表示朝向圈内（左顺右逆），d = 1 表示朝向圈外（左逆右顺）</span></span><br><span class="line">    <span class="comment">// dir = 0 表示向左数，dir = 1 表示向右数</span></span><br><span class="line">    <span class="comment">// 返回执行完一次指令后的位置下标</span></span><br><span class="line">    <span class="keyword">if</span> (d == <span class="number">1</span>)</span><br><span class="line">        dir = <span class="number">1</span> - dir;    <span class="comment">// 统一朝向方便讨论</span></span><br><span class="line">    <span class="keyword">if</span> (dir == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> (cur - i + n) % n;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">return</span> (cur + i) % n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; dir[i] &gt;&gt; prof[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> d, s, cur = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; d &gt;&gt; s;</span><br><span class="line">        cur = <span class="built_in">next</span>(cur, dir[cur], d, s);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; prof[cur] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt(), m = sc.nextInt();</span><br><span class="line">        <span class="type">Main</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Main</span>(n);</span><br><span class="line">        <span class="type">int</span>[] dir = <span class="keyword">new</span> <span class="title class_">int</span>[n]; <span class="comment">// Direction</span></span><br><span class="line">        String[] prof = <span class="keyword">new</span> <span class="title class_">String</span>[n]; <span class="comment">// profession</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            dir[i] = sc.nextInt();</span><br><span class="line">            prof[i] = sc.next();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cur</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            cur = s.next(cur, dir[cur], sc.nextInt(), sc.nextInt());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(prof[cur]);</span><br><span class="line">        sc.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Main</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.n = n;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">(<span class="type">int</span> cur, <span class="type">int</span> d, <span class="type">int</span> dir, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="comment">// 当前位置 cur, 小人朝向 d, 方向 dir, 第 i 个</span></span><br><span class="line">        <span class="comment">// 小人位置在数组中是逆时针的，所以逆序是顺时针方向</span></span><br><span class="line">        <span class="comment">// d = 0 表示朝向圈内（左顺右逆），d = 1 表示朝向圈外（左逆右顺）</span></span><br><span class="line">        <span class="comment">// dir = 0 表示向左数，dir = 1 表示向右数</span></span><br><span class="line">        <span class="comment">// 返回执行完一次指令后的位置下标</span></span><br><span class="line">        <span class="keyword">if</span> (d == <span class="number">1</span>)</span><br><span class="line">            dir = <span class="number">1</span> - dir; <span class="comment">// 统一朝向方便讨论</span></span><br><span class="line">        <span class="keyword">if</span> (dir == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> (cur - i + n) % n;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> (cur + i) % n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p1042-noip2003-普及组-乒乓球">P1042 [NOIP2003 普及组]
乒乓球</h2>
<h3 id="题目描述-4">题目描述</h3>
<p>国际乒联现在主席沙拉拉自从上任以来就立志于推行一系列改革，以推动乒乓球运动在全球的普及。其中
<span class="math inline">\(11\)</span>
分制改革引起了很大的争议，有一部分球员因为无法适应新规则只能选择退役。华华就是其中一位，他退役之后走上了乒乓球研究工作，意图弄明白
<span class="math inline">\(11\)</span> 分制和 <span class="math inline">\(21\)</span>
分制对选手的不同影响。在开展他的研究之前，他首先需要对他多年比赛的统计数据进行一些分析，所以需要你的帮忙。</p>
<p>华华通过以下方式进行分析，首先将比赛每个球的胜负列成一张表，然后分别计算在
<span class="math inline">\(11\)</span> 分制和 <span class="math inline">\(21\)</span>
分制下，双方的比赛结果（截至记录末尾）。</p>
<p>比如现在有这么一份记录，（其中 <span class="math inline">\(\texttt
W\)</span> 表示华华获得一分，<span class="math inline">\(\texttt
L\)</span> 表示华华对手获得一分）：</p>
<p><span class="math inline">\(\texttt{WWWWWWWWWWWWWWWWWWWWWWLW}\)</span></p>
<p>在 <span class="math inline">\(11\)</span>
分制下，此时比赛的结果是华华第一局 <span class="math inline">\(11\)</span> 比 <span class="math inline">\(0\)</span> 获胜，第二局 <span class="math inline">\(11\)</span> 比 <span class="math inline">\(0\)</span> 获胜，正在进行第三局，当前比分 <span class="math inline">\(1\)</span> 比 <span class="math inline">\(1\)</span>。而在 <span class="math inline">\(21\)</span> 分制下，此时比赛结果是华华第一局 <span class="math inline">\(21\)</span> 比 <span class="math inline">\(0\)</span> 获胜，正在进行第二局，比分 <span class="math inline">\(2\)</span> 比 <span class="math inline">\(1\)</span>。如果一局比赛刚开始，则此时比分为 <span class="math inline">\(0\)</span> 比 <span class="math inline">\(0\)</span>。直到分差大于或者等于 <span class="math inline">\(2\)</span>，才一局结束。</p>
<p>你的程序就是要对于一系列比赛信息的输入（<span class="math inline">\(\texttt{WL}\)</span> 形式），输出正确的结果。</p>
<h3 id="输入格式-4">输入格式</h3>
<p>每个输入文件包含若干行字符串，字符串有大写的 <span class="math inline">\(\texttt W\)</span> 、 <span class="math inline">\(\texttt L\)</span> 和 <span class="math inline">\(\texttt E\)</span> 组成。其中 <span class="math inline">\(\texttt E\)</span> 表示比赛信息结束，程序应该忽略
<span class="math inline">\(\texttt E\)</span> 之后的所有内容。</p>
<h3 id="输出格式-4">输出格式</h3>
<p>输出由两部分组成，每部分有若干行，每一行对应一局比赛的比分（按比赛信息输入顺序）。其中第一部分是
<span class="math inline">\(11\)</span> 分制下的结果，第二部分是 <span class="math inline">\(21\)</span>
分制下的结果，两部分之间由一个空行分隔。</p>
<h3 id="输入输出样例-4">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">WWWWWWWWWWWWWWWWWWWW</span><br><span class="line">WWLWE</span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">11</span>:<span class="number">0</span></span><br><span class="line"><span class="number">11</span>:<span class="number">0</span></span><br><span class="line"><span class="number">1</span>:<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">21</span>:<span class="number">0</span></span><br><span class="line"><span class="number">2</span>:<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="说明提示-4">说明&amp;提示</h3>
<p>每行至多 <span class="math inline">\(25\)</span> 个字母，最多有 <span class="math inline">\(2500\)</span> 行。</p>
<h3 id="解题思路-4">解题思路</h3>
<p>对输入分别计算两种分制下的结果即可,
另外，题目有点描述得不是特别清楚，并不是比赛 11 或 21
局就结束，而是比赛有人达到 11 分且两人分数差大于等于2才结束</p>
<h3 id="解答代码-4">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> s1[<span class="number">7007</span>], s2[<span class="number">7007</span>];    <span class="comment">// 存放 21 分制的结果</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>, b = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> c = <span class="number">0</span>, d = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="type">char</span> s;</span><br><span class="line">    <span class="type">bool</span> p1 = <span class="literal">true</span>, p2 = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        s = <span class="built_in">getchar</span>();</span><br><span class="line">        p1 = <span class="literal">true</span>;</span><br><span class="line">        p2 = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="string">&#x27;E&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s == <span class="string">&#x27;W&#x27;</span>) &#123;</span><br><span class="line">            a++, c++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s == <span class="string">&#x27;L&#x27;</span>) &#123;</span><br><span class="line">            b++, d++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((a &gt;= <span class="number">11</span> &amp;&amp; a - b &gt;= <span class="number">2</span>) || (b &gt;= <span class="number">11</span> &amp;&amp; b - a &gt;= <span class="number">2</span>)) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d:%d\n&quot;</span>, a, b);</span><br><span class="line">            a = <span class="number">0</span>;</span><br><span class="line">            b = <span class="number">0</span>;</span><br><span class="line">            p1 = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((c &gt;= <span class="number">21</span> &amp;&amp; c - d &gt;= <span class="number">2</span>) || (d &gt;= <span class="number">21</span> &amp;&amp; d - c &gt;= <span class="number">2</span>)) &#123;</span><br><span class="line">            s1[i] = c;</span><br><span class="line">            s2[i++] = d;</span><br><span class="line">            c = <span class="number">0</span>;</span><br><span class="line">            d = <span class="number">0</span>;</span><br><span class="line">            p2 = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a + b != <span class="number">0</span> || p1) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d:%d\n&quot;</span>, a, b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; ++j) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d:%d\n&quot;</span>, s1[j], s2[j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (c + d != <span class="number">0</span> || p2)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d:%d\n&quot;</span>, c, d);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p1179-noip2010-普及组-数字统计">P1179 [NOIP2010 普及组]
数字统计</h2>
<h3 id="题目描述-5">题目描述</h3>
<p>请统计某个给定范围<span class="math inline">\([L,
R]\)</span>的所有整数中，数字 <span class="math inline">\(2\)</span>
出现的次数。</p>
<p>比如给定范围<span class="math inline">\([2, 22]\)</span>，数字$ 2$
在数 <span class="math inline">\(2\)</span> 中出现了 <span class="math inline">\(1\)</span> 次，在数 <span class="math inline">\(12\)</span> 中出现 <span class="math inline">\(1\)</span> 次，在数 <span class="math inline">\(20\)</span> 中出现 <span class="math inline">\(1\)</span> 次，在数 21 中出现 <span class="math inline">\(1\)</span> 次，在数 <span class="math inline">\(22\)</span> 中出现 <span class="math inline">\(2\)</span> 次，所以数字 <span class="math inline">\(2\)</span> 在该范围内一共出现了 <span class="math inline">\(6\)</span> 次。</p>
<h3 id="输入格式-5">输入格式</h3>
<p><span class="math inline">\(2\)</span> 个正整数 <span class="math inline">\(L\)</span> 和 <span class="math inline">\(R\)</span>，之间用一个空格隔开。</p>
<h3 id="输出格式-5">输出格式</h3>
<p>数字 $2 $出现的次数。</p>
<h3 id="输入输出样例-5">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> <span class="number">22</span></span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<h3 id="说明提示-5">说明&amp;提示</h3>
<p><span class="math inline">\(1 ≤ L ≤R≤ 100000\)</span>。</p>
<h3 id="解题思路-5">解题思路</h3>
<p>前面有题类似的，也是数位dp</p>
<p>当然也可以模拟解法，遍历所有数字统计</p>
<h3 id="解答代码-5">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// 数据范围</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line">ll l, r, dp[N], mi[N];</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">Count</span><span class="params">(ll n, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">    ll tmp = n, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 拆开 n 各位上的数存入 a 中</span></span><br><span class="line">    <span class="keyword">while</span> (n) a[++len] = n % <span class="number">10</span>, n /= <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// 由高位向低位枚举</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = len; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        ans += dp[i - <span class="number">1</span>] * a[i];</span><br><span class="line">        <span class="keyword">if</span> (k &lt; a[i]) ans += mi[i - <span class="number">1</span>];</span><br><span class="line">        tmp -= mi[i - <span class="number">1</span>] * a[i];</span><br><span class="line">        <span class="keyword">if</span> (k == a[i]) ans += tmp + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) ans -= mi[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">CountProblem</span><span class="params">(ll start, ll end, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 统计 [start, end] 范围内 0 ~ 9 出现次数，存于数组 ans 中</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Count</span>(end, k) - <span class="built_in">Count</span>(start - <span class="number">1</span>, k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r);</span><br><span class="line">    mi[<span class="number">0</span>] = <span class="number">1ll</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; N; ++i) &#123;</span><br><span class="line">        dp[i] = dp[i - <span class="number">1</span>] * <span class="number">10</span> + mi[i - <span class="number">1</span>];</span><br><span class="line">        mi[i] = <span class="number">10ll</span> * mi[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld &quot;</span>, <span class="built_in">CountProblem</span>(l, r, <span class="number">2</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> sc.nextLong(), end = sc.nextLong();</span><br><span class="line">        sc.close();</span><br><span class="line">        System.out.print(<span class="keyword">new</span> <span class="title class_">Main</span>().CountProblem(start, end, <span class="number">2</span>) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// dp[i] 表示 满 i 位中各个数码出现次数（9……9 (i个9) 中 k(=0~9) 出现次数）</span></span><br><span class="line">    <span class="comment">// base[i] = 10 ^ i</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">17</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">long</span>[] dp, base;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        dp = <span class="keyword">new</span> <span class="title class_">long</span>[N];</span><br><span class="line">        base = <span class="keyword">new</span> <span class="title class_">long</span>[N];</span><br><span class="line">        base[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; N; ++i) &#123;</span><br><span class="line">            <span class="comment">// dp[i] = 10 * dp[i - 1] + 10 ^(i - 1)</span></span><br><span class="line">            <span class="comment">// 表示 前 i - 1 位的次数 + 第 i 位的出现次数</span></span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] * <span class="number">10</span> + base[i - <span class="number">1</span>];</span><br><span class="line">            base[i] = base[i - <span class="number">1</span>] * <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="title function_">Count</span><span class="params">(<span class="type">long</span> n, <span class="type">int</span> s)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] num = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">        <span class="type">long</span> <span class="variable">k</span> <span class="operator">=</span> n;</span><br><span class="line">        <span class="comment">// 拆开 n 各位上的数存入 数组中</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">            num[++i] = (<span class="type">int</span>) (n % <span class="number">10</span>);</span><br><span class="line">            n /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">            ans += dp[i - <span class="number">1</span>] * num[i];</span><br><span class="line">            <span class="keyword">if</span> (s &lt; num[i])</span><br><span class="line">                ans += base[i - <span class="number">1</span>];</span><br><span class="line">            k -= base[i - <span class="number">1</span>] * num[i];</span><br><span class="line">            <span class="keyword">if</span> (s == num[i])</span><br><span class="line">                ans += k + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (s == <span class="number">0</span>)</span><br><span class="line">                ans -= base[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">CountProblem</span><span class="params">(<span class="type">long</span> start, <span class="type">long</span> end, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Count(end, k) - Count(start - <span class="number">1</span>, k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>模拟解法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">CountProblem</span>(<span class="params">start: <span class="built_in">int</span>, end: <span class="built_in">int</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;统计 k 在范围 [start,end] 的出现次数&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>((<span class="built_in">str</span>(i).count(<span class="string">&#x27;2&#x27;</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, end + <span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(CountProblem(*<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split()), <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p2615-noip2015-提高组-神奇的幻方">P2615 [NOIP2015 提高组]
神奇的幻方</h2>
<h3 id="题目描述-6">题目描述</h3>
<p>题目描述 幻方是一种很神奇的 <span class="math inline">\(N*N\)</span>
矩阵：它由数字 <span class="math inline">\(1,2,3,\cdots \cdots ,N \times
N\)</span> 构成，且每行、每列及两条对角线上的数字之和都相同。</p>
<p>当 <span class="math inline">\(N\)</span>
为奇数时，我们可以通过下方法构建一个幻方：</p>
<p>首先将 <span class="math inline">\(1\)</span> 写在第一行的中间。</p>
<p>之后，按如下方式从小到大依次填写每个数 <span class="math inline">\(K
(K=2,3,\cdots,N \times N)\)</span> ：</p>
<ol type="1">
<li>若 <span class="math inline">\((K-1)\)</span>
在第一行但不在最后一列，则将 <span class="math inline">\(K\)</span>
填在最后一行， <span class="math inline">\((K-1)\)</span>
所在列的右一列；</li>
<li>若 <span class="math inline">\((K-1)\)</span>
在最后一列但不在第一行，则将 <span class="math inline">\(K\)</span>
填在第一列， <span class="math inline">\((K-1)\)</span>
所在行的上一行；</li>
<li>若 <span class="math inline">\((K-1)\)</span> 在第一行最后一列，则将
<span class="math inline">\(K\)</span> 填在 <span class="math inline">\((K-1)\)</span> 的正下方；</li>
<li>若 <span class="math inline">\((K-1)\)</span>
既不在第一行，也不在最后一列，如果 <span class="math inline">\((K-1)\)</span> 的右上方还未填数，则将 <span class="math inline">\(K\)</span> 填在 <span class="math inline">\((K-1)\)</span> 的右上方，否则将 <span class="math inline">\(K\)</span> 填在 <span class="math inline">\((K-1)\)</span> 的正下方。</li>
</ol>
<p>现给定 <span class="math inline">\(N\)</span> ，请按上述方法构造
<span class="math inline">\(N \times N\)</span> 的幻方。</p>
<h3 id="输入格式-6">输入格式</h3>
<p>一个正整数 <span class="math inline">\(N\)</span>
，即幻方的大小。</p>
<h3 id="输出格式-6">输出格式</h3>
<p>共 <span class="math inline">\(N\)</span> 行 ，每行 <span class="math inline">\(N\)</span> 个整数，即按上述方法构造出的 <span class="math inline">\(N \times N\)</span>
的幻方，相邻两个整数之间用单空格隔开。</p>
<h3 id="输入输出样例-6">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span> <span class="number">1</span> <span class="number">6</span></span><br><span class="line"><span class="number">3</span> <span class="number">5</span> <span class="number">7</span></span><br><span class="line"><span class="number">4</span> <span class="number">9</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>输入: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">25</span></span><br></pre></td></tr></table></figure>
<p>输出: #2</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">327</span> <span class="number">354</span> <span class="number">381</span> <span class="number">408</span> <span class="number">435</span> <span class="number">462</span> <span class="number">489</span> <span class="number">516</span> <span class="number">543</span> <span class="number">570</span> <span class="number">597</span> <span class="number">624</span> <span class="number">1</span> <span class="number">28</span> <span class="number">55</span> <span class="number">82</span> <span class="number">109</span> <span class="number">136</span> <span class="number">163</span> <span class="number">190</span> <span class="number">217</span> <span class="number">244</span> <span class="number">271</span> <span class="number">298</span> <span class="number">325</span></span><br><span class="line"><span class="number">353</span> <span class="number">380</span> <span class="number">407</span> <span class="number">434</span> <span class="number">461</span> <span class="number">488</span> <span class="number">515</span> <span class="number">542</span> <span class="number">569</span> <span class="number">596</span> <span class="number">623</span> <span class="number">25</span> <span class="number">27</span> <span class="number">54</span> <span class="number">81</span> <span class="number">108</span> <span class="number">135</span> <span class="number">162</span> <span class="number">189</span> <span class="number">216</span> <span class="number">243</span> <span class="number">270</span> <span class="number">297</span> <span class="number">324</span> <span class="number">326</span></span><br><span class="line"><span class="number">379</span> <span class="number">406</span> <span class="number">433</span> <span class="number">460</span> <span class="number">487</span> <span class="number">514</span> <span class="number">541</span> <span class="number">568</span> <span class="number">595</span> <span class="number">622</span> <span class="number">24</span> <span class="number">26</span> <span class="number">53</span> <span class="number">80</span> <span class="number">107</span> <span class="number">134</span> <span class="number">161</span> <span class="number">188</span> <span class="number">215</span> <span class="number">242</span> <span class="number">269</span> <span class="number">296</span> <span class="number">323</span> <span class="number">350</span> <span class="number">352</span></span><br><span class="line"><span class="number">405</span> <span class="number">432</span> <span class="number">459</span> <span class="number">486</span> <span class="number">513</span> <span class="number">540</span> <span class="number">567</span> <span class="number">594</span> <span class="number">621</span> <span class="number">23</span> <span class="number">50</span> <span class="number">52</span> <span class="number">79</span> <span class="number">106</span> <span class="number">133</span> <span class="number">160</span> <span class="number">187</span> <span class="number">214</span> <span class="number">241</span> <span class="number">268</span> <span class="number">295</span> <span class="number">322</span> <span class="number">349</span> <span class="number">351</span> <span class="number">378</span></span><br><span class="line"><span class="number">431</span> <span class="number">458</span> <span class="number">485</span> <span class="number">512</span> <span class="number">539</span> <span class="number">566</span> <span class="number">593</span> <span class="number">620</span> <span class="number">22</span> <span class="number">49</span> <span class="number">51</span> <span class="number">78</span> <span class="number">105</span> <span class="number">132</span> <span class="number">159</span> <span class="number">186</span> <span class="number">213</span> <span class="number">240</span> <span class="number">267</span> <span class="number">294</span> <span class="number">321</span> <span class="number">348</span> <span class="number">375</span> <span class="number">377</span> <span class="number">404</span></span><br><span class="line"><span class="number">457</span> <span class="number">484</span> <span class="number">511</span> <span class="number">538</span> <span class="number">565</span> <span class="number">592</span> <span class="number">619</span> <span class="number">21</span> <span class="number">48</span> <span class="number">75</span> <span class="number">77</span> <span class="number">104</span> <span class="number">131</span> <span class="number">158</span> <span class="number">185</span> <span class="number">212</span> <span class="number">239</span> <span class="number">266</span> <span class="number">293</span> <span class="number">320</span> <span class="number">347</span> <span class="number">374</span> <span class="number">376</span> <span class="number">403</span> <span class="number">430</span></span><br><span class="line"><span class="number">483</span> <span class="number">510</span> <span class="number">537</span> <span class="number">564</span> <span class="number">591</span> <span class="number">618</span> <span class="number">20</span> <span class="number">47</span> <span class="number">74</span> <span class="number">76</span> <span class="number">103</span> <span class="number">130</span> <span class="number">157</span> <span class="number">184</span> <span class="number">211</span> <span class="number">238</span> <span class="number">265</span> <span class="number">292</span> <span class="number">319</span> <span class="number">346</span> <span class="number">373</span> <span class="number">400</span> <span class="number">402</span> <span class="number">429</span> <span class="number">456</span></span><br><span class="line"><span class="number">509</span> <span class="number">536</span> <span class="number">563</span> <span class="number">590</span> <span class="number">617</span> <span class="number">19</span> <span class="number">46</span> <span class="number">73</span> <span class="number">100</span> <span class="number">102</span> <span class="number">129</span> <span class="number">156</span> <span class="number">183</span> <span class="number">210</span> <span class="number">237</span> <span class="number">264</span> <span class="number">291</span> <span class="number">318</span> <span class="number">345</span> <span class="number">372</span> <span class="number">399</span> <span class="number">401</span> <span class="number">428</span> <span class="number">455</span> <span class="number">482</span></span><br><span class="line"><span class="number">535</span> <span class="number">562</span> <span class="number">589</span> <span class="number">616</span> <span class="number">18</span> <span class="number">45</span> <span class="number">72</span> <span class="number">99</span> <span class="number">101</span> <span class="number">128</span> <span class="number">155</span> <span class="number">182</span> <span class="number">209</span> <span class="number">236</span> <span class="number">263</span> <span class="number">290</span> <span class="number">317</span> <span class="number">344</span> <span class="number">371</span> <span class="number">398</span> <span class="number">425</span> <span class="number">427</span> <span class="number">454</span> <span class="number">481</span> <span class="number">508</span></span><br><span class="line"><span class="number">561</span> <span class="number">588</span> <span class="number">615</span> <span class="number">17</span> <span class="number">44</span> <span class="number">71</span> <span class="number">98</span> <span class="number">125</span> <span class="number">127</span> <span class="number">154</span> <span class="number">181</span> <span class="number">208</span> <span class="number">235</span> <span class="number">262</span> <span class="number">289</span> <span class="number">316</span> <span class="number">343</span> <span class="number">370</span> <span class="number">397</span> <span class="number">424</span> <span class="number">426</span> <span class="number">453</span> <span class="number">480</span> <span class="number">507</span> <span class="number">534</span></span><br><span class="line"><span class="number">587</span> <span class="number">614</span> <span class="number">16</span> <span class="number">43</span> <span class="number">70</span> <span class="number">97</span> <span class="number">124</span> <span class="number">126</span> <span class="number">153</span> <span class="number">180</span> <span class="number">207</span> <span class="number">234</span> <span class="number">261</span> <span class="number">288</span> <span class="number">315</span> <span class="number">342</span> <span class="number">369</span> <span class="number">396</span> <span class="number">423</span> <span class="number">450</span> <span class="number">452</span> <span class="number">479</span> <span class="number">506</span> <span class="number">533</span> <span class="number">560</span></span><br><span class="line"><span class="number">613</span> <span class="number">15</span> <span class="number">42</span> <span class="number">69</span> <span class="number">96</span> <span class="number">123</span> <span class="number">150</span> <span class="number">152</span> <span class="number">179</span> <span class="number">206</span> <span class="number">233</span> <span class="number">260</span> <span class="number">287</span> <span class="number">314</span> <span class="number">341</span> <span class="number">368</span> <span class="number">395</span> <span class="number">422</span> <span class="number">449</span> <span class="number">451</span> <span class="number">478</span> <span class="number">505</span> <span class="number">532</span> <span class="number">559</span> <span class="number">586</span></span><br><span class="line"><span class="number">14</span> <span class="number">41</span> <span class="number">68</span> <span class="number">95</span> <span class="number">122</span> <span class="number">149</span> <span class="number">151</span> <span class="number">178</span> <span class="number">205</span> <span class="number">232</span> <span class="number">259</span> <span class="number">286</span> <span class="number">313</span> <span class="number">340</span> <span class="number">367</span> <span class="number">394</span> <span class="number">421</span> <span class="number">448</span> <span class="number">475</span> <span class="number">477</span> <span class="number">504</span> <span class="number">531</span> <span class="number">558</span> <span class="number">585</span> <span class="number">612</span></span><br><span class="line"><span class="number">40</span> <span class="number">67</span> <span class="number">94</span> <span class="number">121</span> <span class="number">148</span> <span class="number">175</span> <span class="number">177</span> <span class="number">204</span> <span class="number">231</span> <span class="number">258</span> <span class="number">285</span> <span class="number">312</span> <span class="number">339</span> <span class="number">366</span> <span class="number">393</span> <span class="number">420</span> <span class="number">447</span> <span class="number">474</span> <span class="number">476</span> <span class="number">503</span> <span class="number">530</span> <span class="number">557</span> <span class="number">584</span> <span class="number">611</span> <span class="number">13</span></span><br><span class="line"><span class="number">66</span> <span class="number">93</span> <span class="number">120</span> <span class="number">147</span> <span class="number">174</span> <span class="number">176</span> <span class="number">203</span> <span class="number">230</span> <span class="number">257</span> <span class="number">284</span> <span class="number">311</span> <span class="number">338</span> <span class="number">365</span> <span class="number">392</span> <span class="number">419</span> <span class="number">446</span> <span class="number">473</span> <span class="number">500</span> <span class="number">502</span> <span class="number">529</span> <span class="number">556</span> <span class="number">583</span> <span class="number">610</span> <span class="number">12</span> <span class="number">39</span></span><br><span class="line"><span class="number">92</span> <span class="number">119</span> <span class="number">146</span> <span class="number">173</span> <span class="number">200</span> <span class="number">202</span> <span class="number">229</span> <span class="number">256</span> <span class="number">283</span> <span class="number">310</span> <span class="number">337</span> <span class="number">364</span> <span class="number">391</span> <span class="number">418</span> <span class="number">445</span> <span class="number">472</span> <span class="number">499</span> <span class="number">501</span> <span class="number">528</span> <span class="number">555</span> <span class="number">582</span> <span class="number">609</span> <span class="number">11</span> <span class="number">38</span> <span class="number">65</span></span><br><span class="line"><span class="number">118</span> <span class="number">145</span> <span class="number">172</span> <span class="number">199</span> <span class="number">201</span> <span class="number">228</span> <span class="number">255</span> <span class="number">282</span> <span class="number">309</span> <span class="number">336</span> <span class="number">363</span> <span class="number">390</span> <span class="number">417</span> <span class="number">444</span> <span class="number">471</span> <span class="number">498</span> <span class="number">525</span> <span class="number">527</span> <span class="number">554</span> <span class="number">581</span> <span class="number">608</span> <span class="number">10</span> <span class="number">37</span> <span class="number">64</span> <span class="number">91</span></span><br><span class="line"><span class="number">144</span> <span class="number">171</span> <span class="number">198</span> <span class="number">225</span> <span class="number">227</span> <span class="number">254</span> <span class="number">281</span> <span class="number">308</span> <span class="number">335</span> <span class="number">362</span> <span class="number">389</span> <span class="number">416</span> <span class="number">443</span> <span class="number">470</span> <span class="number">497</span> <span class="number">524</span> <span class="number">526</span> <span class="number">553</span> <span class="number">580</span> <span class="number">607</span> <span class="number">9</span> <span class="number">36</span> <span class="number">63</span> <span class="number">90</span> <span class="number">117</span></span><br><span class="line"><span class="number">170</span> <span class="number">197</span> <span class="number">224</span> <span class="number">226</span> <span class="number">253</span> <span class="number">280</span> <span class="number">307</span> <span class="number">334</span> <span class="number">361</span> <span class="number">388</span> <span class="number">415</span> <span class="number">442</span> <span class="number">469</span> <span class="number">496</span> <span class="number">523</span> <span class="number">550</span> <span class="number">552</span> <span class="number">579</span> <span class="number">606</span> <span class="number">8</span> <span class="number">35</span> <span class="number">62</span> <span class="number">89</span> <span class="number">116</span> <span class="number">143</span></span><br><span class="line"><span class="number">196</span> <span class="number">223</span> <span class="number">250</span> <span class="number">252</span> <span class="number">279</span> <span class="number">306</span> <span class="number">333</span> <span class="number">360</span> <span class="number">387</span> <span class="number">414</span> <span class="number">441</span> <span class="number">468</span> <span class="number">495</span> <span class="number">522</span> <span class="number">549</span> <span class="number">551</span> <span class="number">578</span> <span class="number">605</span> <span class="number">7</span> <span class="number">34</span> <span class="number">61</span> <span class="number">88</span> <span class="number">115</span> <span class="number">142</span> <span class="number">169</span></span><br><span class="line"><span class="number">222</span> <span class="number">249</span> <span class="number">251</span> <span class="number">278</span> <span class="number">305</span> <span class="number">332</span> <span class="number">359</span> <span class="number">386</span> <span class="number">413</span> <span class="number">440</span> <span class="number">467</span> <span class="number">494</span> <span class="number">521</span> <span class="number">548</span> <span class="number">575</span> <span class="number">577</span> <span class="number">604</span> <span class="number">6</span> <span class="number">33</span> <span class="number">60</span> <span class="number">87</span> <span class="number">114</span> <span class="number">141</span> <span class="number">168</span> <span class="number">195</span></span><br><span class="line"><span class="number">248</span> <span class="number">275</span> <span class="number">277</span> <span class="number">304</span> <span class="number">331</span> <span class="number">358</span> <span class="number">385</span> <span class="number">412</span> <span class="number">439</span> <span class="number">466</span> <span class="number">493</span> <span class="number">520</span> <span class="number">547</span> <span class="number">574</span> <span class="number">576</span> <span class="number">603</span> <span class="number">5</span> <span class="number">32</span> <span class="number">59</span> <span class="number">86</span> <span class="number">113</span> <span class="number">140</span> <span class="number">167</span> <span class="number">194</span> <span class="number">221</span></span><br><span class="line"><span class="number">274</span> <span class="number">276</span> <span class="number">303</span> <span class="number">330</span> <span class="number">357</span> <span class="number">384</span> <span class="number">411</span> <span class="number">438</span> <span class="number">465</span> <span class="number">492</span> <span class="number">519</span> <span class="number">546</span> <span class="number">573</span> <span class="number">600</span> <span class="number">602</span> <span class="number">4</span> <span class="number">31</span> <span class="number">58</span> <span class="number">85</span> <span class="number">112</span> <span class="number">139</span> <span class="number">166</span> <span class="number">193</span> <span class="number">220</span> <span class="number">247</span></span><br><span class="line"><span class="number">300</span> <span class="number">302</span> <span class="number">329</span> <span class="number">356</span> <span class="number">383</span> <span class="number">410</span> <span class="number">437</span> <span class="number">464</span> <span class="number">491</span> <span class="number">518</span> <span class="number">545</span> <span class="number">572</span> <span class="number">599</span> <span class="number">601</span> <span class="number">3</span> <span class="number">30</span> <span class="number">57</span> <span class="number">84</span> <span class="number">111</span> <span class="number">138</span> <span class="number">165</span> <span class="number">192</span> <span class="number">219</span> <span class="number">246</span> <span class="number">273</span></span><br><span class="line"><span class="number">301</span> <span class="number">328</span> <span class="number">355</span> <span class="number">382</span> <span class="number">409</span> <span class="number">436</span> <span class="number">463</span> <span class="number">490</span> <span class="number">517</span> <span class="number">544</span> <span class="number">571</span> <span class="number">598</span> <span class="number">625</span> <span class="number">2</span> <span class="number">29</span> <span class="number">56</span> <span class="number">83</span> <span class="number">110</span> <span class="number">137</span> <span class="number">164</span> <span class="number">191</span> <span class="number">218</span> <span class="number">245</span> <span class="number">272</span> <span class="number">299</span></span><br></pre></td></tr></table></figure>
<h3 id="说明提示-6">说明&amp;提示</h3>
<p>对于<span class="math inline">\(100\%\)</span>的数据，对于全部数据，
<span class="math inline">\(1 \leq N \leq 39\)</span> 且 <span class="math inline">\(N\)</span> 为奇数。</p>
<h3 id="解题思路-6">解题思路</h3>
<p>按题意模拟即可</p>
<p>方法二：公式法，从评论区学习到的，其实没那么复杂，将条件归纳总结，其实就一步：对当前位置，若右上(即
<span class="math inline">\((x - 1, y +
1)\)</span>)还没填，那就填右上，否则就填正下方，再加上越界处理(到右边界则回左边界，到上边界则回下边界，反之同理)</p>
<h3 id="解答代码-6">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">41</span>;</span><br><span class="line"><span class="type">int</span> Magic[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">setMagic</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ed = n * n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; ++j)</span><br><span class="line">            Magic[i][j] = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">0</span>, y = n &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    Magic[x][y] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= ed; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">0</span> &amp;&amp; y != n - <span class="number">1</span>)</span><br><span class="line">            x = n - <span class="number">1</span>, y++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (y == n - <span class="number">1</span> &amp;&amp; x != <span class="number">0</span>)</span><br><span class="line">            x--, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (x == <span class="number">0</span> &amp;&amp; y == n - <span class="number">1</span>)</span><br><span class="line">            x++;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (Magic[x - <span class="number">1</span>][y + <span class="number">1</span>] == <span class="number">0</span>)</span><br><span class="line">                x--, y++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                x++;</span><br><span class="line">        &#125;</span><br><span class="line">        Magic[x][y] = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">setMagic</span>(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, Magic[i][<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt; n; ++j)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; %d&quot;</span>, Magic[i][j]);</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>公式法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">sc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> sc.nextInt();</span><br><span class="line">        sc.close();</span><br><span class="line">        <span class="type">int</span>[][] Magic = <span class="keyword">new</span> <span class="title class_">int</span>[n][n];</span><br><span class="line">        <span class="type">int</span> <span class="variable">ed</span> <span class="operator">=</span> n * n;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>, x = <span class="number">0</span>, y = n &gt;&gt; <span class="number">1</span>; i &lt;= ed; ++i) &#123;</span><br><span class="line">            Magic[x][y] = i;</span><br><span class="line">            <span class="keyword">if</span> (Magic[(x + n - <span class="number">1</span>) % n][(y + <span class="number">1</span>) % n] != <span class="number">0</span>) </span><br><span class="line">                x = (x + <span class="number">1</span>) % n;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                x = (x + n - <span class="number">1</span>) % n;</span><br><span class="line">                y = (y + <span class="number">1</span>) % n;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%d&quot;</span>, Magic[i][<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt; n; ++j)</span><br><span class="line">                System.out.printf(<span class="string">&quot; %d&quot;</span>, Magic[i][j]);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">Magic = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">x, y = <span class="number">0</span>, n &gt;&gt; <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n * n + <span class="number">1</span>):</span><br><span class="line">    Magic[x][y] = i</span><br><span class="line">    <span class="keyword">if</span> Magic[(x + n - <span class="number">1</span>) % n][(y + <span class="number">1</span>) % n]:</span><br><span class="line">        x, y = (x + <span class="number">1</span>) % n, y</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        x, y = (x + n - <span class="number">1</span>) % n, (y + <span class="number">1</span>) % n</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> Magic:</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> x:</span><br><span class="line">        <span class="built_in">print</span>(y, end=<span class="string">&quot; &quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p3952-noip2017-提高组-时间复杂度">P3952 [NOIP2017 提高组]
时间复杂度</h2>
<h3 id="题目描述-7">题目描述</h3>
<p>小明正在学习一种新的编程语言
A++，刚学会循环语句的他激动地写了好多程序并
给出了他自己算出的时间复杂度，可他的编程老师实在不想一个一个检查小明的程序，
于是你的机会来啦！下面请你编写程序来判断小明对他的每个程序给出的时间复杂度是否正确。</p>
<p>A++语言的循环结构如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">F i x y</span><br><span class="line">    循环体</span><br><span class="line">E</span><br></pre></td></tr></table></figure>
<p>其中<code>F i x y</code>表示新建变量 <span class="math inline">\(i\)</span>（变量 <span class="math inline">\(i\)</span> 不可与未被销毁的变量重名）并初始化为
<span class="math inline">\(x\)</span>， 然后判断 <span class="math inline">\(i\)</span> 和 <span class="math inline">\(y\)</span> 的大小关系，若 <span class="math inline">\(i\)</span> 小于等于 <span class="math inline">\(y\)</span> 则进入循环，否则不进入。每次循环结束后
<span class="math inline">\(i\)</span> 都会被修改成 <span class="math inline">\(i +1\)</span>，一旦 <span class="math inline">\(i\)</span> 大于 <span class="math inline">\(y\)</span> 终止循环。</p>
<p><span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 可以是正整数（<span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 的大小关系不定）或变量 <span class="math inline">\(n\)</span>。<span class="math inline">\(n\)</span>
是一个表示数据规模的变量，在时间复杂度计算中需保留该变量而不能将其视为常数，该数远大于
<span class="math inline">\(100\)</span>。</p>
<p><code>E</code>
表示循环体结束。循环体结束时，这个循环体新建的变量也被销毁。</p>
<p>注：本题中为了书写方便，在描述复杂度时，使用大写英文字母 <span class="math inline">\(\operatorname O\)</span> 表示通常意义下 <span class="math inline">\(Θ\)</span> 的概念。</p>
<h3 id="输入格式-7">输入格式</h3>
<p>输入文件第一行一个正整数 <span class="math inline">\(t\)</span>，表示有 <span class="math inline">\(t\)</span>（<span class="math inline">\(t \le
10\)</span>）个程序需要计算时间复杂度。 每个程序我们只需抽取其中
<code>F i x y</code> 和 <code>E</code>
即可计算时间复杂度。注意：循环结构允许嵌套。</p>
<p>接下来每个程序的第一行包含一个正整数 <span class="math inline">\(L\)</span> 和一个字符串，<span class="math inline">\(L\)</span>
代表程序行数，字符串表示这个程序的复杂度，<code>O(1)</code>
表示常数复杂度，<code>O(n^w)</code> 表示复杂度为 <span class="math inline">\(n^w\)</span>，其中 <span class="math inline">\(w\)</span> 是一个小于 <span class="math inline">\(100\)</span> 的正整数，输入保证复杂度只有
<code>O(1)</code> 和 <code>O(n^w)</code> 两种类型。</p>
<p>接下来 <span class="math inline">\(L\)</span>
行代表程序中循环结构中的<code>F i x y</code>或者 <code>E</code>。
程序行若以<code>F</code>开头，表示进入一个循环，之后有空格分离的三个字符（串）<code>i x y</code>，
其中 <span class="math inline">\(i\)</span>
是一个小写字母（保证不为<span class="math inline">\(n\)</span>），表示新建的变量名，<span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 可能是正整数或 <span class="math inline">\(n\)</span> ，已知若为正整数则一定小于 <span class="math inline">\(100\)</span>。</p>
<p>程序行若以<code>E</code>开头，则表示循环体结束。</p>
<h3 id="输出格式-7">输出格式</h3>
<p>输出文件共 <span class="math inline">\(t\)</span> 行，对应输入的
<span class="math inline">\(t\)</span> 个程序，每行输出 <code>Yes</code>
或 <code>No</code> 或者
<code>ERR</code>，若程序实际复杂度与输入给出的复杂度一致则输出
<code>Yes</code>，不一致则输出
<code>No</code>，若程序有语法错误（其中语法错误只有: ① <code>F</code> 和
<code>E</code> 不匹配
②新建的变量与已经存在但未被销毁的变量重复两种情况），则输出
<code>ERR</code>。</p>
<p>注意：即使在程序不会执行的循环体中出现了语法错误也会编译错误，要输出
<code>ERR</code>。</p>
<h3 id="输入输出样例-7">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">2</span> <span class="built_in">O</span>(<span class="number">1</span>)</span><br><span class="line">F i <span class="number">1</span> <span class="number">1</span></span><br><span class="line">E</span><br><span class="line"><span class="number">2</span> <span class="built_in">O</span>(n^<span class="number">1</span>)</span><br><span class="line">F x <span class="number">1</span> n</span><br><span class="line">E</span><br><span class="line"><span class="number">1</span> <span class="built_in">O</span>(<span class="number">1</span>)</span><br><span class="line">F x <span class="number">1</span> n</span><br><span class="line"><span class="number">4</span> <span class="built_in">O</span>(n^<span class="number">2</span>)</span><br><span class="line">F x <span class="number">5</span> n</span><br><span class="line">F y <span class="number">10</span> n</span><br><span class="line">E</span><br><span class="line">E</span><br><span class="line"><span class="number">4</span> <span class="built_in">O</span>(n^<span class="number">2</span>)</span><br><span class="line">F x <span class="number">9</span> n</span><br><span class="line">E</span><br><span class="line">F y <span class="number">2</span> n</span><br><span class="line">E</span><br><span class="line"><span class="number">4</span> <span class="built_in">O</span>(n^<span class="number">1</span>)</span><br><span class="line">F x <span class="number">9</span> n</span><br><span class="line">F y n <span class="number">4</span></span><br><span class="line">E</span><br><span class="line">E</span><br><span class="line"><span class="number">4</span> <span class="built_in">O</span>(<span class="number">1</span>)</span><br><span class="line">F y n <span class="number">4</span></span><br><span class="line">F x <span class="number">9</span> n</span><br><span class="line">E</span><br><span class="line">E</span><br><span class="line"><span class="number">4</span> <span class="built_in">O</span>(n^<span class="number">2</span>)</span><br><span class="line">F x <span class="number">1</span> n</span><br><span class="line">F x <span class="number">1</span> <span class="number">10</span></span><br><span class="line">E</span><br><span class="line">E</span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Yes</span><br><span class="line">Yes</span><br><span class="line">ERR</span><br><span class="line">Yes</span><br><span class="line">No</span><br><span class="line">Yes</span><br><span class="line">Yes</span><br><span class="line">ERR</span><br></pre></td></tr></table></figure>
<h3 id="说明提示-7">说明&amp;提示</h3>
<p>【输入输出样例解释 <span class="math inline">\(1\)</span>】</p>
<p>第一个程序 <span class="math inline">\(i\)</span> 从 <span class="math inline">\(1\)</span> 到 <span class="math inline">\(1\)</span> 是常数复杂度。</p>
<p>第二个程序 <span class="math inline">\(x\)</span> 从 <span class="math inline">\(1\)</span> 到 <span class="math inline">\(n\)</span> 是 <span class="math inline">\(n\)</span> 的一次方的复杂度。</p>
<p>第三个程序有一个 <code>F</code> 开启循环却没有 <code>E</code>
结束，语法错误。</p>
<p>第四个程序二重循环，<span class="math inline">\(n\)</span>
的平方的复杂度。</p>
<p>第五个程序两个一重循环，<span class="math inline">\(n\)</span>
的一次方的复杂度。</p>
<p>第六个程序第一重循环正常，但第二重循环开始即终止（因为 <span class="math inline">\(n\)</span> 远大于 <span class="math inline">\(100\)</span>，<span class="math inline">\(100\)</span> 大于 <span class="math inline">\(4\)</span>）。</p>
<p>第七个程序第一重循环无法进入，故为常数复杂度。</p>
<p>第八个程序第二重循环中的变量 <span class="math inline">\(x\)</span>
与第一重循环中的变量重复，出现语法错误②，输出 <code>ERR</code>。</p>
<p>【数据规模与约定】</p>
<p>对于 <span class="math inline">\(30\%\)</span>
的数据：不存在语法错误，数据保证小明给出的每个程序的前 <span class="math inline">\(L/2\)</span> 行一定为以 <code>F</code>
开头的语句，第 <span class="math inline">\(L/2+1\)</span> 行至第 <span class="math inline">\(L\)</span> 行一定为以 <code>E</code>
开头的语句，<span class="math inline">\(L  \le 10\)</span>，若 <span class="math inline">\(x\)</span>、<span class="math inline">\(y\)</span>
均为整数，<span class="math inline">\(x\)</span> 一定小于 <span class="math inline">\(y\)</span>，且只有 <span class="math inline">\(y\)</span> 有可能为 <span class="math inline">\(n\)</span>。</p>
<p>对于 <span class="math inline">\(50\%\)</span>
的数据：不存在语法错误，<span class="math inline">\(L  \le
100\)</span>，且若 <span class="math inline">\(x\)</span>、<span class="math inline">\(y\)</span> 均为整数，<span class="math inline">\(x\)</span> 一定小于 <span class="math inline">\(y\)</span>， 且只有 <span class="math inline">\(y\)</span> 有可能为 <span class="math inline">\(n\)</span>。</p>
<p>对于 <span class="math inline">\(70\%\)</span>
的数据：不存在语法错误，<span class="math inline">\(L  \le
100\)</span>。</p>
<p>对于 <span class="math inline">\(100\%\)</span> 的数据：<span class="math inline">\(L  \le 100\)</span>。</p>
<h3 id="解题思路-7">解题思路</h3>
<p>模拟题中的大题，实话说，思路简单但实现相当复杂，评论区一众调了好几个小时，十多个小时才调好的</p>
<p>有两个要求</p>
<ol type="1">
<li>判断程序是否有误，对于 <span class="math inline">\(F\)</span> 与
<span class="math inline">\(E\)</span>
是否匹配，使用栈是很自然的思路了，对于有无重复变量，进入栈中遍历检查即可</li>
<li>复杂度的计算，取决于循环的嵌套和循环的执行次数</li>
</ol>
<p>有在线和离线两种做法</p>
<ul>
<li>离线做法：先把代码用字符串数组保存下来在做检查计算</li>
<li>在线做法：边读入代码边计算</li>
</ul>
<p>毫无疑问离线做法比在线做法更简单</p>
<h3 id="解答代码-7">解答代码</h3>
<p>在线做法，37-46-82-100，提交了 4 次才通过全部 11
个用例，代码中有相当一部分是在线IDE调试时的打印内容，可以无视掉（main中的已经注释掉了），前三次失败提交的问题如下：</p>
<ol type="1">
<li>常数复杂度的循环没有更新对应栈中的复杂度，导致后序的复杂度计算错误，解决方法是该情况下复制前一个对象中保存的复杂度</li>
<li>栈空的情况下复杂度的更新会出错（因为依赖于栈顶元素的前一个计算，而且数组越界不会报错），解决方法是特判栈空的情况；循环过程中栈中元素没有重置为默认值，导致结点的
<code>start, ed</code>
变量依靠是否为初值来判断更新与否的地方不会执行更新，使得除第一次查询外的后序检查大多失效，解决方法是在循环开始将两变量恢复到默认值</li>
<li>循环执行一次也是常数复杂度而非无效循环，多了个等于号，去掉即可</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = <span class="number">0x3f3f3f3f</span>;    <span class="comment">// 设为 n 的大小（无穷）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">loop</span> &#123;    <span class="comment">// 栈结点，记录遍历名，循环起点和终点、当前复杂度</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">char</span> var = <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">    <span class="type">int</span> start = <span class="number">-1</span>, ed = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> comp;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, L;         <span class="comment">// 程序数量、程序行数</span></span><br><span class="line"><span class="type">int</span> state = <span class="number">1</span>;    <span class="comment">// 0 表示错误，返回 ERR，1 表示正常循环</span></span><br><span class="line"><span class="type">int</span> inv = <span class="number">-1</span>;     <span class="comment">// 记录 不会循环的层数 在栈中的位置</span></span><br><span class="line">string s, comp, start, ed;</span><br><span class="line"><span class="type">char</span> var;</span><br><span class="line">loop st[<span class="number">27</span>];    <span class="comment">// 存放变量名的栈</span></span><br><span class="line"><span class="type">int</span> p = <span class="number">-1</span>;     <span class="comment">// 栈顶指针，指向栈中栈顶元素</span></span><br><span class="line"><span class="type">int</span> w = <span class="number">0</span>;      <span class="comment">// 计算得到的时间复杂度的指数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">str2int</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> v : s) ans = ans * <span class="number">10</span> + (v - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">printstack</span><span class="params">(<span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 输出栈内容，p 是栈顶指针</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;---Begin print stack---\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= p; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;var = &quot;</span> &lt;&lt; st[i].var &lt;&lt; <span class="string">&quot; start = &quot;</span> &lt;&lt; st[i].start &lt;&lt; <span class="string">&quot; ed = &quot;</span> &lt;&lt; st[i].ed &lt;&lt; <span class="string">&quot; comp = &quot;</span> &lt;&lt; st[i].comp &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;------end print------\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; L &gt;&gt; comp;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; &quot;L = &quot; &lt;&lt; L &lt;&lt; &quot; comp = &quot; &lt;&lt; comp &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">        p = <span class="number">-1</span>, state = <span class="number">1</span>, w = <span class="number">0</span>, inv = <span class="number">-1</span>;    <span class="comment">// 初始化栈顶指针、状态和复杂度</span></span><br><span class="line">        <span class="comment">// printstack(5);</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; L; ++j) &#123;</span><br><span class="line">            cin &gt;&gt; s;</span><br><span class="line">            <span class="comment">// 有错误的程序直接读完程序后面的内容就可以了</span></span><br><span class="line">            <span class="keyword">if</span> (state == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s == <span class="string">&quot;F&quot;</span>) cin &gt;&gt; var &gt;&gt; start &gt;&gt; ed;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (s == <span class="string">&quot;F&quot;</span>) &#123;</span><br><span class="line">                <span class="comment">// s, var, start, ed 分别表示，循环标准 F, 变量名，循环起点，循环终点</span></span><br><span class="line">                cin &gt;&gt; var &gt;&gt; start &gt;&gt; ed;</span><br><span class="line">                <span class="comment">// cout &lt;&lt; s &lt;&lt; &quot; &quot; &lt;&lt; var &lt;&lt; &quot; &quot; &lt;&lt; start &lt;&lt; &quot; &quot; &lt;&lt; ed &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">                st[++p].var = var;    <span class="comment">// 变量名压栈</span></span><br><span class="line">                st[p].start = <span class="number">-1</span>, st[p].ed = <span class="number">-1</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; p; ++i) &#123;    <span class="comment">// 遍历栈检查是否有重复变量名</span></span><br><span class="line">                    <span class="keyword">if</span> (st[i].var == var) &#123;</span><br><span class="line">                        state = <span class="number">0</span>;</span><br><span class="line">                        <span class="keyword">goto</span> endloop;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (st[i].var == start[<span class="number">0</span>]) st[p].start = st[i].start;</span><br><span class="line">                    <span class="keyword">if</span> (st[i].var == ed[<span class="number">0</span>]) st[p].ed = st[i].ed;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (start == <span class="string">&quot;n&quot;</span>) st[p].start = INF;</span><br><span class="line">                <span class="keyword">if</span> (ed == <span class="string">&quot;n&quot;</span>) st[p].ed = INF;</span><br><span class="line">                <span class="keyword">if</span> (st[p].start == <span class="number">-1</span>) st[p].start = <span class="built_in">str2int</span>(start);</span><br><span class="line">                <span class="keyword">if</span> (st[p].ed == <span class="number">-1</span>) st[p].ed = <span class="built_in">str2int</span>(ed);</span><br><span class="line">                <span class="keyword">if</span> (st[p].ed &lt; st[p].start) inv = p;    <span class="comment">// 循环终点比循环起点低即无效</span></span><br><span class="line">                <span class="keyword">if</span> (st[p].ed - st[p].start &gt; <span class="number">200</span> &amp;&amp; inv == <span class="number">-1</span>) &#123;</span><br><span class="line">                    st[p].comp = p == <span class="number">0</span> ? <span class="number">1</span> : (st[p - <span class="number">1</span>].comp + <span class="number">1</span>);</span><br><span class="line">                    w = <span class="built_in">max</span>(st[p].comp, w);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    st[p].comp = p == <span class="number">0</span> ? <span class="number">0</span> : (st[p - <span class="number">1</span>].comp);</span><br><span class="line">                <span class="comment">// printstack(p);</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;    <span class="comment">// s == E</span></span><br><span class="line">                <span class="comment">// cout &lt;&lt; s &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">                <span class="keyword">if</span> (p == inv) inv = <span class="number">-1</span>;      <span class="comment">// 退出 不执行的循环</span></span><br><span class="line">                <span class="keyword">if</span> (p-- == <span class="number">-1</span>) state = <span class="number">0</span>;    <span class="comment">// F 与 E 不匹配也将状态设为 0</span></span><br><span class="line">            &#125;</span><br><span class="line">        endloop:</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 栈非空和状态为 0 都表示程序有语法错误</span></span><br><span class="line">        <span class="keyword">if</span> (state == <span class="number">0</span> || p != <span class="number">-1</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;ERR\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (w == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;comp = &quot; &lt;&lt; comp &lt;&lt; &quot;  w = &quot; &lt;&lt; w &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">            <span class="keyword">if</span> (comp == <span class="string">&quot;O(1)&quot;</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;comp = &quot; &lt;&lt; comp &lt;&lt; &quot;  w = &quot; &lt;&lt; w &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">            <span class="keyword">if</span> (comp == <span class="string">&quot;O(n^&quot;</span> + <span class="built_in">to_string</span>(w) + <span class="string">&quot;)&quot;</span>)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Yes\n&quot;</span>);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;No\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p2482-sdoi2010猪国杀">P2482 [SDOI2010]猪国杀</h2>
<h3 id="题目描述-8">题目描述</h3>
<h4 id="游戏背景">游戏背景</h4>
<p>《猪国杀》是一种多猪牌类回合制游戏，一共有 <span class="math inline">\(3\)</span>
种角色：主猪，忠猪，反猪。每局游戏主猪有且只有 <span class="math inline">\(1\)</span> 只，忠猪和反猪可以有多只，每只猪扮演 $1
$ 种角色。</p>
<h4 id="游戏目的">游戏目的</h4>
<p>主猪 / <span class="math inline">\(\texttt{MP}\)</span>：自己存活的情况下消灭所有的反猪。<br>
忠猪 / <span class="math inline">\(\texttt{ZP}\)</span>：不惜一切保护主猪，胜利条件与主猪相同。<br>
反猪 / <span class="math inline">\(\texttt{FP}\)</span>：杀死主猪。</p>
<h4 id="游戏过程">游戏过程</h4>
<p>游戏开始时，每个玩家手里都会有 <span class="math inline">\(4\)</span>
张牌，且体力上限和初始体力都是 <span class="math inline">\(4\)</span>
。</p>
<p>开始游戏时，从主猪开始，按照逆时针方向（数据中就是按照编号从 $ 1 , 2,
3 n , 1 $ 的顺序）依次行动。</p>
<p>每个玩家自己的回合可以分为 2 个阶段：</p>
<ul>
<li><strong>摸牌阶段</strong>：从牌堆顶部摸 <span class="math inline">\(2\)</span> 张牌，依次放到手牌的最右边；<br>
</li>
<li><strong>出牌阶段</strong>：你可以使用任意张牌，每次使用牌的时候都使用最靠左的能够使用的牌。当然，要满足如下规则：
<ol type="1">
<li>如果没有猪哥连弩，每个出牌阶段只能使用 <span class="math inline">\(1\)</span> 次「杀」来攻击；</li>
<li>任何牌被使用后被弃置（武器是装备上）；被弃置的牌以后都不能再用，即与游戏无关。</li>
</ol></li>
</ul>
<h4 id="各种牌介绍">各种牌介绍</h4>
<p>每张手牌用 <span class="math inline">\(1\)</span>
个字母表示，字母代表牌的种类。</p>
<h4 id="基本牌">基本牌</h4>
<ul>
<li><p>『桃 / <span class="math inline">\(\texttt{P}\)</span>』在自己的回合内，如果自己的体力值不等于体力上限，那么使用
<span class="math inline">\(1\)</span> 个桃可以为自己补充 <span class="math inline">\(1\)</span>
点体力，否则不能使用桃；桃只能对自己使用；在自己的回合外，如果自己的血变为
<span class="math inline">\(0\)</span>
或者更低，那么也可以使用。</p></li>
<li><p>『杀 / <span class="math inline">\(\texttt{K}\)</span>』在自己的回合内，对攻击范围内除自己以外的
<span class="math inline">\(1\)</span>
名角色使用。如果没有被『闪』抵消，则造成 <span class="math inline">\(1\)</span> 点伤害。无论有无武器，杀的攻击范围都是
<span class="math inline">\(1\)</span>。</p></li>
<li><p>『闪 / <span class="math inline">\(\texttt{D}\)</span>』当你受到杀的攻击时，可以弃置
<span class="math inline">\(1\)</span> 张闪来抵消杀的效果。</p></li>
</ul>
<h4 id="锦囊牌">锦囊牌</h4>
<ul>
<li><p>『决斗 / <span class="math inline">\(\texttt{F}\)</span>』出牌阶段，对除自己以外任意
<span class="math inline">\(1\)</span>
名角色使用，由目标角色先开始，自己和目标角色轮流弃置 <span class="math inline">\(1\)</span> 张杀，首先没有杀可弃的一方受到 <span class="math inline">\(1\)</span>
点伤害，另一方视为此伤害的来源。</p></li>
<li><p>『南猪入侵 / <span class="math inline">\(\texttt{N}\)</span>』出牌阶段，对除你以外所有角色使用，按逆时针顺序从使用者下家开始依次结算，除非弃置
<span class="math inline">\(1\)</span> 张杀，否则受到 <span class="math inline">\(1\)</span> 点伤害。</p></li>
<li><p>『万箭齐发 / <span class="math inline">\(\texttt{W}\)</span>』和南猪入侵类似，不过要弃置的不是杀而是闪。</p></li>
<li><p>『无懈可击 / <span class="math inline">\(\texttt{J}\)</span>』在目标锦囊生效前抵消其效果。每次有
<span class="math inline">\(1\)</span>
张锦囊即将生效时，从使用这张锦囊的猪开始，按照逆时针顺序，依次得到使用无懈可击的机会；效果：用于决斗时，决斗无效并弃置；用于南猪入侵或万箭齐发时，当结算到某个角色时才能使用，当前角色不需弃置牌并且不会受到伤害（仅对
<span class="math inline">\(1\)</span>
个角色产生效果）；用于无懈可击时，成为目标的无懈可击被无效。</p></li>
</ul>
<h4 id="装备牌">装备牌</h4>
<ul>
<li>『猪哥连弩 / <span class="math inline">\(\texttt{Z}\)</span>』武器，攻击范围 <span class="math inline">\(1\)</span> ，出牌阶段你可以使用任意张杀;
同一时刻最多只能装 <span class="math inline">\(1\)</span>
把武器；如果先前已经有了 <span class="math inline">\(1\)</span>
把武器，那么之后再装武器的话，会弃置以前的武器来装现在的武器。</li>
</ul>
<h4 id="特殊事件及概念解释">特殊事件及概念解释</h4>
<ul>
<li><p><strong>伤害来源</strong>：杀、南猪入侵、万箭齐发的伤害来源均是使用该牌的猪，决斗的伤害来源如上；</p></li>
<li><p><strong>距离</strong>：两只猪的距离定义为沿着逆时针方向间隔的猪数
<span class="math inline">\(+1\)</span> 。即初始时 <span class="math inline">\(1\)</span> 和 <span class="math inline">\(2\)</span> 的距离为 <span class="math inline">\(1\)</span> ，但是 <span class="math inline">\(2\)</span> 和 <span class="math inline">\(1\)</span> 的距离就是 <span class="math inline">\(n-1\)</span>
。注意一个角色的死亡会导致一些猪距离的改变；</p></li>
<li><p><strong>玩家死亡</strong>：如果该玩家的体力降到 <span class="math inline">\(0\)</span>
或者更低，并且自己手中没有足够的桃使得自己的体力值回到 <span class="math inline">\(1\)</span>
，那么就死亡了，死亡后所有的牌（装备区，手牌区）被弃置；</p></li>
<li><p><strong>奖励与惩罚</strong>：反猪死亡时，最后一个伤害来源处（即使是反猪）立即摸
<span class="math inline">\(3\)</span>
张牌。忠猪死亡时，如果最后一个伤害来源是主猪，那么主猪所有装备牌、手牌被弃置。</p></li>
</ul>
<p>注意：一旦达成胜利条件，游戏立刻结束，因此即使会摸 <span class="math inline">\(3\)</span> 张牌或者还有牌可以用也不用执行了。</p>
<p>现在，我们已经知道每只猪的角色、手牌，还有牌堆初始情况，并且假设每个角色会按照如下的行为准则进行游戏，你需要做的就是告诉小猪
iPig 最后的结果。</p>
<h4 id="几种行为">几种行为</h4>
<ul>
<li><strong>献殷勤</strong>：使用无懈可击挡下南猪入侵、万箭齐发、决斗；使用无懈可击抵消表敌意；<br>
</li>
<li>表敌意：对某个角色使用杀、决斗；使用无懈可击抵消献殷勤；<br>
</li>
<li><strong>跳忠</strong>：即通过行动表示自己是忠猪。跳忠行动就是对主猪或对某只已经跳忠的猪献殷勤，或者对某只已经跳反的猪表敌意；<br>
</li>
<li><strong>跳反</strong>：即通过行动表示自己是反猪。跳反行动就是对主猪或对某只已经跳忠的猪表敌意，或者对某只已经跳反的猪献殷勤。</li>
</ul>
<p><strong>注意：忠猪不会跳反，反猪也不会跳忠；不管是忠猪还是反猪，能够跳必然跳</strong>。</p>
<h4 id="行动准则">行动准则</h4>
<h4 id="共性">共性</h4>
<ul>
<li>每个角色如果手里有桃且生命值未满，那么必然吃掉；</li>
<li>有南猪入侵、万箭齐发、必然使用；有装备必然装上；</li>
<li>受到杀时，有闪必然弃置；</li>
<li>响应南猪入侵或者万箭齐发时候，有杀 / 闪必然弃置；</li>
<li>不会对未表明身份的猪献殷勤（<strong>包括自己</strong>）。</li>
</ul>
<h4 id="特性">特性</h4>
<ul>
<li>主猪：
<ul>
<li>主猪会认为「没有跳身份，且用南猪入侵 /
万箭齐发对自己造成伤害的猪」是<strong>类</strong>反猪（没伤害到不算，注意类反猪并没有表明身份），如果之后跳了，那么主猪会重新认识这只猪；<br>
</li>
<li>对于每种表敌意的方式，对逆时针方向能够执行到的第一只类反猪或者已跳反猪表；如果没有，那么就不表敌意；</li>
<li>决斗时会不遗余力弃置杀；</li>
<li>如果能对已经跳忠的猪或自己献殷勤，那么一定献；如果能够对已经跳反的猪表敌意，那么一定表。</li>
</ul></li>
<li>忠猪：
<ul>
<li>对于每种表敌意的方式，对「逆时针方向能够执行到的第一只已经跳反的猪」表，如果没有，那么就不表敌意；</li>
<li>决斗时，如果对方是主猪，那么不会弃置杀，否则，会不遗余力弃置杀；</li>
<li>如果有机会对主猪或者已经跳忠的猪献殷勤，那么一定献。</li>
</ul></li>
<li>反猪：
<ul>
<li>对于每种表敌意的方式，如果有机会则对主猪表，否则，对「逆时针方向能够执行到的第一只已经跳忠的猪」表，如果没有，那么就不表敌意；</li>
<li>决斗时会不遗余力弃置杀；</li>
<li>如果有机会对已经跳反的猪献殷勤，那么一定献。</li>
</ul></li>
</ul>
<p>限于 iPig 只会用 P++ 语言写 A + B，他请你用 Pigcal (Pascal)、P (C) 或
P++ (C++) 语言来帮他预测最后的结果。</p>
<h3 id="输入格式-8">输入格式</h3>
<p>输入文件第一行包含两个正整数 $ n $ $ (2 n ) $ 和 <span class="math inline">\(m\)</span> $ (m )
$，分别代表玩家数和牌堆中牌的数量。数据保证牌的数量够用。</p>
<p>接下来 <span class="math inline">\(n\)</span> 行，每行 <span class="math inline">\(5\)</span> 个字符串，依次表示对第 <span class="math inline">\(i\)</span> 只猪的角色和初始 $4 $
张手牌描述。编号为 <span class="math inline">\(1\)</span>
的肯定是主猪。</p>
<p>再接下来一行，一共 <span class="math inline">\(m\)</span>
个字符串，按照从牌堆顶部到牌堆底部的顺序描述每张牌。</p>
<p><strong>注意：所有的相邻的两个字符串都严格用 <span class="math inline">\(1\)</span>
个空格隔开，行尾没有多余空格</strong>。</p>
<h3 id="输出格式-8">输出格式</h3>
<p>输出数据第一行包含一个字符串代表游戏结果。如果是主猪胜利，那么输出
<span class="math inline">\(\texttt{MP}\)</span> ，否则输出 <span class="math inline">\(\texttt{FP}\)</span> 。数据保证游戏总会结束。</p>
<p>接下来 <span class="math inline">\(n\)</span> 行，第 <span class="math inline">\(i\)</span> 行是对第 <span class="math inline">\(i\)</span>
只猪的手牌描述（注意只需要输出手牌），按照手牌从左往右的顺序输出，相邻两张牌用
<span class="math inline">\(1\)</span>
个空格隔开，行末尾没有多余空格。如果这只猪已阵亡，那么只要输出 <span class="math inline">\(\texttt{DEAD}\)</span> 即可。</p>
<p><strong>注意：如果要输出手牌而没有手牌的话，那么只需输出 <span class="math inline">\(1\)</span> 个空行</strong>。</p>
<p><strong>由于数据问题，若牌堆已空，按照每次抽牌抽到的都是最后一张。</strong></p>
<h3 id="输入输出样例-8">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> <span class="number">10</span></span><br><span class="line">MP D D F F</span><br><span class="line">ZP N N N D</span><br><span class="line">FP J J J J</span><br><span class="line">F F D D J J F F K D</span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FP</span><br><span class="line">DEAD</span><br><span class="line">DEAD</span><br><span class="line">J J J J J J D</span><br></pre></td></tr></table></figure>
<h3 id="说明提示-8">说明&amp;提示</h3>
<p>样例解释</p>
<p>第一回合：</p>
<ul>
<li>主猪没有目标可以表敌意；</li>
<li>接下来忠猪使用了 <span class="math inline">\(3\)</span>
张南猪入侵，主猪掉了 <span class="math inline">\(3\)</span>
点体力，并认为该角色为类反猪，<span class="math inline">\(3\)</span>
号角色尽管手里有无懈可击，但是因为自己未表明身份，所以同样不能对自己用，乖乖掉
<span class="math inline">\(3\)</span> 点体力；</li>
</ul>
<p>下一回合：</p>
<ul>
<li>反猪无牌可出；</li>
<li>接下来主猪对着类反猪爆发，使用 <span class="math inline">\(4\)</span>
张决斗，忠猪死亡，结果主猪弃掉所有牌；</li>
<li>下来反猪摸到 <span class="math inline">\(1\)</span>
张杀直接杀死主猪获胜。</li>
</ul>
<p>子任务</p>
<p>一共 <span class="math inline">\(20\)</span> 组测试数据，每个点 <span class="math inline">\(5\)</span> 分。</p>
<p><span class="math inline">\(10\%\)</span> 的数据没有锦囊牌，另外
<span class="math inline">\(20\%\)</span> 的数据没有无懈可击。</p>
<h3 id="解题思路-8">解题思路</h3>
<p>又是一个模拟大大题，和上一题不同的是，上一题难度在于各种特殊情况，这题的难度在理解题意上，并且代码量也比上一题多得多，另外，题目限制了只能使用
C++ （好吧，这么复杂的题目就是没限制也懒得再写第二次了）</p>
<p>另外，这一题适合使用面向对象的思想来解答，玩家对象的概念很明确</p>
<h3 id="解答代码-8">解答代码</h3>
<p>这题太太太复杂了，已经不想写了，留着以后再<del>不全</del>补全吧ovo,未完待续</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_LOVE = <span class="number">4</span>;        <span class="comment">// 生命上限</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_PLAYER = <span class="number">17</span>;     <span class="comment">// 最大玩家人数</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAX_CARDS = <span class="number">2007</span>;    <span class="comment">// 最大牌堆数量</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m;    <span class="comment">// 玩家数量和牌堆大小 n 范围 [2, 10], m &lt;= 2000</span></span><br><span class="line">string p;    <span class="comment">// 玩家身份</span></span><br><span class="line"><span class="type">char</span> c;      <span class="comment">// 牌</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">card</span> &#123;</span><br><span class="line">    <span class="type">char</span> c;    <span class="comment">// 牌的种类</span></span><br><span class="line">    card *prev, *next;</span><br><span class="line">    <span class="built_in">card</span>(<span class="type">char</span> _c = <span class="string">&#x27;#&#x27;</span>, card* _prev = <span class="literal">nullptr</span>, card* _next = <span class="literal">nullptr</span>)</span><br><span class="line">        : <span class="built_in">c</span>(_c), <span class="built_in">prev</span>(_prev), <span class="built_in">next</span>(_next) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手牌链表，双向循环链表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">cards</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    card* head;    <span class="comment">// 手牌链表头结点</span></span><br><span class="line">    <span class="built_in">cards</span>() &#123;</span><br><span class="line">        head = <span class="keyword">new</span> <span class="built_in">card</span>();</span><br><span class="line">        head-&gt;next = head;</span><br><span class="line">        head-&gt;prev = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 摸到一张类型为 c 的牌加入牌堆最右侧</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">(<span class="type">char</span> c)</span> </span>&#123;</span><br><span class="line">        card* cur = <span class="keyword">new</span> <span class="built_in">card</span>(c, head-&gt;prev, head);</span><br><span class="line">        head-&gt;prev-&gt;next = cur;</span><br><span class="line">        head-&gt;prev = cur;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用掉一张牌</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">discard</span><span class="params">(card* c)</span> </span>&#123;</span><br><span class="line">        c-&gt;prev-&gt;next = c-&gt;next;</span><br><span class="line">        c-&gt;next-&gt;prev = c-&gt;prev;</span><br><span class="line">        <span class="keyword">delete</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用一张类型为 c 的牌, 无牌可用则返回 false</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play</span><span class="params">(<span class="type">char</span> c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> s = <span class="built_in">find</span>(c);</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">discard</span>(s);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 牌堆中查找一张类型为 c 的牌并返回，若不存在则返回 nullptr</span></span><br><span class="line">    <span class="function">card* <span class="title">find</span><span class="params">(<span class="type">char</span> c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (card* p = head-&gt;next; p != head; p = p-&gt;next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (p-&gt;c == c) <span class="keyword">return</span> p;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">player</span> &#123;    <span class="comment">// 玩家</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/* =========== 基本方法成员 =========== */</span></span><br><span class="line">    <span class="built_in">player</span>(<span class="type">int</span> _r, <span class="type">int</span> _id);            <span class="comment">// 构造函数（身份&amp;编号）</span></span><br><span class="line">    <span class="function">string <span class="title">get_r</span><span class="params">()</span></span>;                     <span class="comment">// 返回玩家身份</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_id</span><span class="params">()</span></span>;                       <span class="comment">// 返回玩家编号</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">treat</span><span class="params">(<span class="type">int</span> c = <span class="number">1</span>)</span></span>;              <span class="comment">// 生命值增加</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">hurt</span><span class="params">(<span class="type">int</span> c = <span class="number">1</span>)</span></span>;               <span class="comment">// 生命值减少, 减少到 0 触发死亡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dead</span><span class="params">()</span></span>;                        <span class="comment">// 玩家出局</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isLive</span><span class="params">()</span></span>;                      <span class="comment">// 是否还活着</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">get_card</span><span class="params">(<span class="type">char</span> c)</span></span>;              <span class="comment">// 手牌最右侧加入一张牌</span></span><br><span class="line">    <span class="function"><span class="type">char</span> <span class="title">get_card</span><span class="params">()</span></span>;                    <span class="comment">// 从牌堆摸一张牌</span></span><br><span class="line">    <span class="function">player* <span class="title">add_player</span><span class="params">(player* nxt)</span></span>;    <span class="comment">// 下家添加一位玩家</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_P</span><span class="params">()</span></span>;                      <span class="comment">// 使用 桃</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_K</span><span class="params">(player* target)</span></span>;        <span class="comment">// 使用 杀</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_D</span><span class="params">()</span></span>;                      <span class="comment">// 使用 闪</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_F</span><span class="params">(player* target)</span></span>;        <span class="comment">// 使用 决斗</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_N</span><span class="params">()</span></span>;                      <span class="comment">// 使用 南蛮入侵</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_W</span><span class="params">()</span></span>;                      <span class="comment">// 使用 万箭齐发</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_J</span><span class="params">()</span></span>;                      <span class="comment">// 使用 无懈可击</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">play_Z</span><span class="params">()</span></span>;                      <span class="comment">// 使用 诸葛连弩</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* =========== 静态方法 =========== */</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">set_mp</span><span class="params">(player* pig)</span></span>;    <span class="comment">// 设置主将</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">init_rcg</span><span class="params">()</span></span>;             <span class="comment">// 初始化</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">add_fp</span><span class="params">()</span></span>;               <span class="comment">// 反贼增加</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">fp_dead</span><span class="params">()</span></span>;              <span class="comment">// 反贼出局</span></span><br><span class="line">    <span class="function"><span class="type">static</span> player* <span class="title">get_mp</span><span class="params">()</span></span>;            <span class="comment">// 获取主将</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">bool</span> <span class="title">player::FP_Live</span><span class="params">()</span></span>;      <span class="comment">// 是否还有反贼存活</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">/* =========== 基本数据成员 =========== */</span></span><br><span class="line">    <span class="type">int</span> r;                 <span class="comment">// 身份: 0 - 主将, 1 - 忠臣, 2 - 反贼</span></span><br><span class="line">    <span class="type">int</span> id;                <span class="comment">// 编号 从 1 开始逆时针方向依次是 1, 2, 3, ……</span></span><br><span class="line">    <span class="type">int</span> love;              <span class="comment">// 生命值，-1 表示已经出局</span></span><br><span class="line">    player *pre, *next;    <span class="comment">// 双向循环链式结构，上家和下家</span></span><br><span class="line">    cards cd;              <span class="comment">// 玩家的手牌</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* =========== 静态数据成员 =========== */</span></span><br><span class="line">    <span class="type">static</span> <span class="type">char</span> cards[MAX_CARDS];    <span class="comment">// 牌堆</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> cur_card;             <span class="comment">// 当前摸牌位置（当前牌可摸）</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> max_card;             <span class="comment">// 牌堆大小（最后一张牌下标）</span></span><br><span class="line">    <span class="type">static</span> player* mp;               <span class="comment">// 主将，同时也是头指针</span></span><br><span class="line">    <span class="comment">// 认定的对方身份，0 - 主将, 1 - 忠臣, 2 - 反贼, 3 - 类反贼, -1 表示不确定</span></span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> rcg[MAX_PLAYER];</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> cnt_fp;    <span class="comment">// 统计反贼数量</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> player::cards[MAX_CARDS];</span><br><span class="line"><span class="type">int</span> player::cur_card = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> player::max_card = <span class="number">0</span>;</span><br><span class="line">player* player::mp = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="type">int</span> player::rcg[MAX_PLAYER];</span><br><span class="line"><span class="type">int</span> player::cnt_fp = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">player::<span class="built_in">player</span>(<span class="type">int</span> _r, <span class="type">int</span> _id)</span><br><span class="line">    : <span class="built_in">r</span>(_r), <span class="built_in">id</span>(_id) &#123;</span><br><span class="line">    <span class="comment">// 构造函数</span></span><br><span class="line">    love = MAX_LOVE;</span><br><span class="line">    pre = <span class="keyword">this</span>, next = <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> player* <span class="title">player::add_player</span><span class="params">(player* nxt)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 下家添加一位玩家</span></span><br><span class="line">    nxt-&gt;next = <span class="keyword">this</span>-&gt;next;</span><br><span class="line">    nxt-&gt;pre = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next-&gt;pre = nxt;</span><br><span class="line">    <span class="keyword">this</span>-&gt;next = nxt;</span><br><span class="line">    <span class="keyword">return</span> nxt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::dead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 玩家出局</span></span><br><span class="line">    <span class="keyword">this</span>-&gt;love = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (r == <span class="number">2</span>) &#123;</span><br><span class="line">        cnt_fp--;</span><br><span class="line">        <span class="keyword">if</span> (cnt_fp == <span class="number">0</span>)</span><br><span class="line">            ;    <span class="comment">// 触发游戏结束</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (r == <span class="number">0</span>)</span><br><span class="line">        ;    <span class="comment">// 触发游戏结束</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手牌加入一张牌</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::get_card</span><span class="params">(<span class="type">char</span> c)</span> </span>&#123;</span><br><span class="line">    cd.<span class="built_in">draw</span>(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 摸一张牌</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">char</span> <span class="title">player::get_card</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (cur_card &lt;= max_card)</span><br><span class="line">        <span class="keyword">return</span> cards[cur_card++];</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> cards[max_card];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生命值减少, 减少到 0 触发死亡</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::hurt</span><span class="params">(<span class="type">int</span> c = <span class="number">1</span>)</span> </span>&#123;</span><br><span class="line">    love -= c;</span><br><span class="line">    <span class="comment">// 使用 桃 回血</span></span><br><span class="line">    <span class="keyword">if</span> (love &lt;= <span class="number">0</span>) <span class="built_in">dead</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生命值增加</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::treat</span><span class="params">(<span class="type">int</span> c = <span class="number">1</span>)</span> </span>&#123;</span><br><span class="line">    love += c;</span><br><span class="line">    <span class="keyword">if</span> (love &gt; MAX_LOVE) love = MAX_LOVE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回玩家身份</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> string <span class="title">player::get_r</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (r == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;MP&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (r == <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ZP&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;FP&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回玩家编号</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">player::get_id</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回玩家是否存活</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::isLive</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> love &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 桃</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_P</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!cd.<span class="built_in">play</span>(<span class="string">&#x27;P&#x27;</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">treat</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对目标使用 杀</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_K</span><span class="params">(player* target)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 在自己的回合内，对攻击范围内除自己以外的 1 名角色使用。如果没有被『闪』抵消，则造成 1 点伤害。无论有无武器，杀的攻击范围都是 1</span></span><br><span class="line">    <span class="keyword">if</span> (!cd.<span class="built_in">play</span>(<span class="string">&#x27;K&#x27;</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 目标受到杀时，有闪必然弃置</span></span><br><span class="line">    <span class="keyword">if</span> (!target-&gt;<span class="built_in">play_D</span>()) &#123;</span><br><span class="line">        <span class="comment">// 没有闪，受到一点伤害</span></span><br><span class="line">        target-&gt;<span class="built_in">hurt</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 闪</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_D</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 当你受到杀的攻击时，可以弃置 1 张闪来抵消杀的效果</span></span><br><span class="line">    <span class="keyword">if</span> (!cd.<span class="built_in">play</span>(<span class="string">&#x27;D&#x27;</span>)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 决斗</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_F</span><span class="params">(player* target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 南蛮入侵</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_N</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 万箭齐发</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_W</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 无懈可击</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_J</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 诸葛连弩</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::play_Z</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置主将</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::set_mp</span><span class="params">(player* pig)</span> </span>&#123;</span><br><span class="line">    player::mp = pig;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化 rcg 数组</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::init_rcg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(player::rcg, <span class="number">-1</span>, <span class="built_in">sizeof</span>(player::rcg));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 反贼增加</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::add_fp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    player::cnt_fp++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 反贼出局</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">player::fp_dead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    player::cnt_fp--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取主将</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> player* <span class="title">player::get_mp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> player::mp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否还有反贼存活</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">player::FP_Live</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> player::cnt_fp &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 玩家数、牌堆数</span></span><br><span class="line">    player::<span class="built_in">init_rcg</span>();</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        cin &gt;&gt; p;</span><br><span class="line">        <span class="type">int</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="string">&quot;MP&quot;</span>)</span><br><span class="line">            t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p == <span class="string">&quot;ZP&quot;</span>)</span><br><span class="line">            t = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p == <span class="string">&quot;FP&quot;</span>)</span><br><span class="line">            t = <span class="number">2</span>;</span><br><span class="line">        player* pig = <span class="keyword">new</span> <span class="built_in">player</span>(t, i);</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="number">0</span>) player::<span class="built_in">set_mp</span>(pig);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; ++j) &#123;</span><br><span class="line">            cin &gt;&gt; c;</span><br><span class="line">            pig-&gt;<span class="built_in">get_card</span>(c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">        <span class="comment">// 初始化牌堆</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="p5380-thupc2019鸭棋">P5380 [THUPC2019]鸭棋</h2>
<h3 id="题目描述-9">题目描述</h3>
<h4 id="题目背景">题目背景</h4>
<p>鸭棋是一种风靡鸭子界的棋类游戏。事实上，它与中国象棋有一些相似之处，但规则不尽相同。在这里，我们将为你介绍鸭棋的规则。</p>
<p><strong>同时，我们下发了一个模拟鸭棋规则的玩具，你可以结合这个玩具理解题目</strong>（也可以在
AK 后与你的队友进行对弈）。详情请见「玩具使用说明」。</p>
<p>鸭棋在一个 <span class="math inline">\(10\times 9\)</span>（<span class="math inline">\(10\)</span> 行 <span class="math inline">\(9\)</span>
列）的网格棋盘上进行，网格上的每个格点都可以有棋子停留。对弈双方一方执红（<code>red</code>）棋、另一方执蓝（<code>blue</code>）棋，双方轮流执行操作，轮到一位玩家操作时，他必须选择一枚自己的棋子，并按照规则进行一步移动。</p>
<p>鸭棋发明者鸭子德规定一局鸭棋由红方执先手，并设计了初始棋盘布局如下：</p>
<p><img data-src="模拟/58700.png" alt="initial_board.png"></p>
<h4 id="棋子类型与走子规则">棋子类型与走子规则</h4>
<p>棋子分为 <span class="math inline">\(7\)</span>
类，下面介绍了它们的名字以及它们的移动规则。介绍移动规则时，我们默认棋子所处位置为
<span class="math inline">\(\left( x,y\right)\)</span>（表示第 <span class="math inline">\(x\)</span> 行的第 <span class="math inline">\(y\)</span>
列，下同），并列出它可以到达的位置：</p>
<ul>
<li><strong>王</strong>（<code>captain</code>)：可达的位置共 <span class="math inline">\(4\)</span> 个，包括 <span class="math inline">\(\left(x\pm 1,y\right)\)</span> 及 <span class="math inline">\(\left(x,y\pm 1\right)\)</span>。</li>
<li><strong>士</strong>（<code>guard</code>）：可达的位置共 <span class="math inline">\(4\)</span> 个，包括 <span class="math inline">\(\left(x\pm 1,y\pm 1\right)\)</span> 及 <span class="math inline">\(\left(x\pm 1,y\mp 1\right)\)</span>。</li>
<li><strong>象</strong>（<code>elephant</code>）：可达的位置至多 <span class="math inline">\(4\)</span> 个，对于任意 <span class="math inline">\(s_x,s_y\in \left\{ 1,-1\right\}\)</span>，分别有：
<ul>
<li>如果位置 <span class="math inline">\(\left(x+s_x\times 1 ,y+
s_y\times 1\right)\)</span> 上<strong>无任意一方</strong>的棋子停留，则
<span class="math inline">\(\left( x+s_x \times 2,y+s_y \times
2\right)\)</span> 为一个可达的位置。</li>
</ul></li>
<li><strong>马</strong>（<code>horse</code>）：可达的位置至多 <span class="math inline">\(8\)</span> 个，对于任意 <span class="math inline">\(s_x,s_y\in \left\{ 1,-1\right\}\)</span>，分别有：
<ul>
<li>如果位置 <span class="math inline">\(\left(x+s_x\times 1
,y\right)\)</span> 上<strong>无任意一方</strong>的棋子停留，则 <span class="math inline">\(\left( x+s_x \times 2,y+s_y \times
1\right)\)</span> 为一个可达的位置。</li>
<li>如果位置 <span class="math inline">\(\left(x ,y+ s_y \times 1
\right)\)</span> 上<strong>无任意一方</strong>的棋子停留，则 <span class="math inline">\(\left( x+s_x \times 1,y+s_y \times
2\right)\)</span> 为一个可达的位置。</li>
</ul></li>
<li><strong>车</strong>（<code>car</code>）：可在<strong>不跨越其他棋子</strong>的前提下，到达同行或同列的所有其他位置。</li>
<li><strong>鸭</strong>（<code>duck</code>）：可达的位置至多 <span class="math inline">\(8\)</span> 个，对于任意 <span class="math inline">\(s_x,s_y\in \left\{ 1,-1\right\}\)</span>，分别有：
<ul>
<li>如果位置 <span class="math inline">\(\left(x+s_x\times 2 ,y+s_y
\times 1\right),\left(x+s_x\times 1 ,y\right)\)</span>
上均<strong>无任意一方</strong>的棋子停留，则 <span class="math inline">\(\left( x+s_x \times 3,y+s_y \times
2\right)\)</span> 为一个可达的位置。</li>
<li>如果位置 <span class="math inline">\(\left(x+s_x \times 1 ,y+ s_y
\times 2 \right),\left(x ,y+ s_y \times 1 \right)\)</span>
上均<strong>无任意一方</strong>的棋子停留，则 <span class="math inline">\(\left( x+s_x \times 2,y+s_y \times
3\right)\)</span> 为一个可达的位置。</li>
</ul></li>
<li><strong>兵</strong>（<code>soldier</code>）：可达的位置共 <span class="math inline">\(8\)</span> 个，包括 <span class="math inline">\(\left(x\pm 1,y\right)\)</span> 及 <span class="math inline">\(\left(x,y\pm 1\right)\)</span> 及 <span class="math inline">\(\left(x\pm 1,y\pm 1\right)\)</span> 及 <span class="math inline">\(\left(x\pm 1,y\mp 1\right)\)</span>。</li>
</ul>
<p><strong>除上面描述的规则之外，棋子移动还有如下额外规则：</strong></p>
<ul>
<li>不能将棋子移动到棋盘外的某个位置。</li>
<li>玩家不能将棋子移动到<strong>已经停留了己方棋子</strong>的位置。</li>
<li>如果玩家将棋子移动到了一个<strong>已经停留了对方棋子</strong>的位置，那么原本停留在该位置上的这个<strong>对方棋子</strong>将被移出游戏。</li>
</ul>
<h4 id="胜利条件与将军局面">胜利条件与将军局面</h4>
<p>玩家在这个游戏中的目标是将对方的<strong>王</strong>移出游戏。一旦一方的<strong>王</strong>被移出游戏，则另一方立即宣告胜利。</p>
<p>对于一个棋盘的状态，如果存在一方有一步合法的操作能够将另一方的<strong>王</strong>移出游戏，则我们说当前局面是一个<strong>将军</strong>的局面。需要友情提示的是，根据定义，将军局面的形成包括（但不限于）如下这些可能：</p>
<ol type="1">
<li><p>一方将一枚棋子移动到可以攻击对方<strong>王</strong>的位置</p></li>
<li><p>在己方<strong>王</strong>受到威胁时不采取措施躲避</p></li>
<li><p>主动将<strong>王</strong>移动至会受到攻击的位置</p></li>
</ol>
<p><strong>除此之外，需要特别说明的是，游戏结束后，由于双方不可再操作，因此不可能出现将军局面，即便此时另一方王处于被「攻击」的位置。</strong></p>
<h4 id="题目描述-10">题目描述</h4>
<p>今年的 IDCC（International Duck Chess
Competition，国际鸭棋大赛）正在如火如荼地进行着。你观摩了一场精彩绝伦的比赛，但你对对弈过程的记忆已经模糊不清了，只有系统留下的他们的<strong>操作序列</strong>，序列中的每个<strong>操作</strong>为当前操作者试图移动某个位置的棋子至另一个位置。你希望用这个序列，来复现出整局棋局的对弈过程。即，对于每步操作，你需要<strong>首先判其是否合法</strong>，若合法，则<strong>进一步求出</strong>：</p>
<ol type="1">
<li>这步操作移动了哪个棋子。</li>
<li>这步操作后，是否存在棋子被移出游戏，如有则还需求出被移出游戏的棋子。</li>
<li>这步操作后，是否形成将军局面。</li>
<li>这步操作后，游戏是否结束。</li>
</ol>
<p>可能包含的不合法情况如下：</p>
<ul>
<li>此步移动的初始位置无己方棋子停留。</li>
<li>此步移动的初始位置有己方棋子停留，但移动不符合规则。</li>
<li>游戏已经结束。</li>
</ul>
<p>序列中的不合法操作是需要被忽略的。比如，如果轮到红方移动，此时序列中的当前操作恰好是不合法的，则这个操作将被忽略，序列中的下一步操作将成为红方这步的操作（如仍不合法则继续忽略，直至出现合法的操作）。</p>
<h3 id="输入格式-9">输入格式</h3>
<p>第一行一个非负整数 <span class="math inline">\(Q\)</span>，表示操作序列的长度。接下来依次描述每个操作。</p>
<p>接下来 <span class="math inline">\(Q\)</span> 行，每行 <span class="math inline">\(4\)</span> 个整数 <span class="math inline">\(x_s,
y_s, x_t, y_t\)</span>（<span class="math inline">\(0\leq x_s,x_t
\lt  10\)</span>，<span class="math inline">\(0\leq y_s,y_t
\lt  9\)</span>），描述一个欲将 <span class="math inline">\(\left(x_s,y_s\right)\)</span> 处棋子移动到 <span class="math inline">\(\left(x_t,y_t\right)\)</span>
的操作。在这里，我们规定左下角（即红方<strong>车</strong>摆放的位置，图见「题目背景」）为
<span class="math inline">\(\left(0,0\right)\)</span>。</p>
<p>保证 <span class="math inline">\(Q\leq 1000\)</span>。</p>
<h3 id="输出格式-9">输出格式</h3>
<p>输出 <span class="math inline">\(Q\)</span>
行，对于每个操作依次输出复现结果。每行输出一个操作的结果：</p>
<ul>
<li>如果该操作为不合法操作，则请输出 <code>Invalid command</code>。</li>
<li>如果为合法操作，则依次回答「题目描述」中的问题 <span class="math inline">\(1\sim 4\)</span>：
<ul>
<li>被移动的棋子用
<code>[颜色] [类型]</code>（注意中间包含空格）来描述，请使用它们的英文名称（见「题目背景」）。如，红象为
<code>red elephant</code>，蓝王为 <code>blue captain</code>。</li>
<li>被移出游戏的棋子的描述方式与上面类似。特别地，<strong>如果无棋子被移出游戏，则该问题的答案为
<code>NA</code></strong>。</li>
<li>用 <code>yes</code>、<code>no</code>
分别表示形成、不形成将军局面。</li>
<li>用 <code>yes</code>、<code>no</code>
分别表示游戏结束、游戏不结束。</li>
<li>用 <code>;</code>（分号）将所有问题的答案隔开。</li>
<li>比如，四个问题的答案分别为：被移动的棋子是蓝车，无棋子被移出游戏，形成将军局面，游戏未结束。则该行应输出
<code>blue car;NA;yes;no</code>。</li>
</ul></li>
</ul>
<h3 id="输入输出样例-9">输入输出样例</h3>
<p>输入: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">18</span></span><br><span class="line"><span class="number">0</span> <span class="number">0</span> <span class="number">7</span> <span class="number">0</span></span><br><span class="line"><span class="number">9</span> <span class="number">0</span> <span class="number">8</span> <span class="number">0</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">1</span> <span class="number">3</span></span><br><span class="line"><span class="number">0</span> <span class="number">2</span> <span class="number">2</span> <span class="number">0</span></span><br><span class="line"><span class="number">0</span> <span class="number">3</span> <span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="number">0</span> <span class="number">4</span> <span class="number">0</span> <span class="number">3</span></span><br><span class="line"><span class="number">9</span> <span class="number">4</span> <span class="number">8</span> <span class="number">4</span></span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">7</span> <span class="number">0</span> <span class="number">4</span> <span class="number">2</span></span><br><span class="line"><span class="number">7</span> <span class="number">0</span> <span class="number">5</span> <span class="number">3</span></span><br><span class="line"><span class="number">9</span> <span class="number">2</span> <span class="number">7</span> <span class="number">4</span></span><br><span class="line"><span class="number">2</span> <span class="number">0</span> <span class="number">4</span> <span class="number">3</span></span><br><span class="line"><span class="number">9</span> <span class="number">1</span> <span class="number">8</span> <span class="number">3</span></span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="number">6</span> <span class="number">6</span></span><br><span class="line"><span class="number">7</span> <span class="number">4</span> <span class="number">9</span> <span class="number">2</span></span><br><span class="line"><span class="number">8</span> <span class="number">4</span> <span class="number">9</span> <span class="number">4</span></span><br><span class="line"><span class="number">6</span> <span class="number">6</span> <span class="number">9</span> <span class="number">4</span></span><br><span class="line"><span class="number">9</span> <span class="number">8</span> <span class="number">8</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>
<p>输出: #1</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Invalid command</span><br><span class="line">Invalid command</span><br><span class="line">Invalid command</span><br><span class="line">Invalid command</span><br><span class="line">red guard;NA;no;no</span><br><span class="line">Invalid command</span><br><span class="line">blue captain;NA;no;no</span><br><span class="line">red soldier;NA;no;no</span><br><span class="line">Invalid command</span><br><span class="line">Invalid command</span><br><span class="line">blue elephant;NA;no;no</span><br><span class="line">red duck;NA;no;no</span><br><span class="line">blue horse;NA;no;no</span><br><span class="line">red duck;blue soldier;no;no</span><br><span class="line">Invalid command</span><br><span class="line">blue captain;NA;yes;no</span><br><span class="line">red duck;blue captain;no;yes</span><br><span class="line">Invalid command</span><br></pre></td></tr></table></figure>
<h3 id="说明提示-9">说明&amp;提示</h3>
<p>来自 THUPC（THU Programming Contest，清华大学程序设计竞赛）2019。</p>
<p>题解等资源可在 <a target="_blank" rel="noopener" href="https://github.com/wangyurzee7/THUPC2019" class="uri">https://github.com/wangyurzee7/THUPC2019</a> 查看。</p>
<h3 id="解题思路-9">解题思路</h3>
<p>照旧是模拟，比起前面那个猪国杀逻辑简单多了</p>
<p>因为中途有打印调试，提前排除了几个低级bug（包括棋子放错位置，函数传错参数等），最后提交只有两个问题：</p>
<ol type="1">
<li>移动棋子的操作中棋子在棋盘上的位置移动了，但棋子本身的坐标没变，导致出现访问空指针的异常</li>
<li>检查是否形成将军的时候采用遍历所有棋子的方法，但没有排除掉已经被吃的棋子，导致结果错误</li>
</ol>
<p>根据异常时的堆栈信息很容易就发现了这两个错误，可以说是很顺利了。</p>
<h3 id="解答代码-9">解答代码</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 阵营</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Camp bool</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RED true</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BLUE false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 棋类</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PIECE int     <span class="comment">// 棋子</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CAPTAIN 0     <span class="comment">// 王</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GUARD 1       <span class="comment">// 士</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ELEPHANT 2    <span class="comment">// 象</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HORSE 3       <span class="comment">// 马</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CAR 4         <span class="comment">// 车</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DUCK 5        <span class="comment">// 鸭</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SOLDIER 6     <span class="comment">// 兵</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 棋子</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">piece</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">piece</span>(Camp _color = RED, PIECE _p = CAPTAIN, <span class="type">int</span> _x = <span class="number">0</span>, <span class="type">int</span> _y = <span class="number">0</span>);</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_x</span><span class="params">()</span></span>;                <span class="comment">// 返回当前横坐标</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get_y</span><span class="params">()</span></span>;                <span class="comment">// 返回当前纵坐标</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isLive</span><span class="params">()</span></span>;              <span class="comment">// 返回是否还在棋盘上，若被吃掉了返回false</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">dead</span><span class="params">()</span></span>;                <span class="comment">// 被吃</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">eat</span><span class="params">(piece* p)</span></span>;         <span class="comment">// 吃掉对方一个棋子</span></span><br><span class="line">    <span class="function">Camp <span class="title">camp</span><span class="params">()</span></span>;                <span class="comment">// 返回所属阵营</span></span><br><span class="line">    <span class="function">PIECE <span class="title">type</span><span class="params">()</span></span>;               <span class="comment">// 返回当前是哪一种棋子</span></span><br><span class="line">    <span class="function">string <span class="title">print_piece</span><span class="params">()</span></span>;       <span class="comment">// 返回类型对应的单个中文字符</span></span><br><span class="line">    <span class="function">string <span class="title">tostring</span><span class="params">()</span></span>;          <span class="comment">// 返回 [阵营] [类型] 的字符串</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">move</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;    <span class="comment">// 移动棋子到指定位置</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Camp color;    <span class="comment">// 所属阵营，true 表示红方，false 表示黑方</span></span><br><span class="line">    PIECE p;       <span class="comment">// 棋子类型</span></span><br><span class="line">    <span class="type">int</span> x, y;      <span class="comment">// 当前坐标</span></span><br><span class="line">    <span class="type">bool</span> save;     <span class="comment">// 是否还在棋盘上</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 双方阵营基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">player</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    piece* p[<span class="number">16</span>];    <span class="comment">// 指针数组</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 红方阵营</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">red</span> : <span class="keyword">public</span> player &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">red</span>() &#123;</span><br><span class="line">        p[<span class="number">0</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, CAPTAIN, <span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">        p[<span class="number">1</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, GUARD, <span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">        p[<span class="number">2</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, GUARD, <span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line">        p[<span class="number">3</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, ELEPHANT, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">        p[<span class="number">4</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, ELEPHANT, <span class="number">0</span>, <span class="number">6</span>);</span><br><span class="line">        p[<span class="number">5</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, HORSE, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        p[<span class="number">6</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, HORSE, <span class="number">0</span>, <span class="number">7</span>);</span><br><span class="line">        p[<span class="number">7</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, CAR, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        p[<span class="number">8</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, CAR, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line">        p[<span class="number">9</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, DUCK, <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">        p[<span class="number">10</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, DUCK, <span class="number">2</span>, <span class="number">8</span>);</span><br><span class="line">        p[<span class="number">11</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, SOLDIER, <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line">        p[<span class="number">12</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, SOLDIER, <span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line">        p[<span class="number">13</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, SOLDIER, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">        p[<span class="number">14</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, SOLDIER, <span class="number">3</span>, <span class="number">6</span>);</span><br><span class="line">        p[<span class="number">15</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(RED, SOLDIER, <span class="number">3</span>, <span class="number">8</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">red</span>() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">delete</span> p[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 蓝方阵营</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">blue</span> : <span class="keyword">public</span> player &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">blue</span>() &#123;</span><br><span class="line">        p[<span class="number">0</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, CAPTAIN, <span class="number">9</span>, <span class="number">4</span>);</span><br><span class="line">        p[<span class="number">1</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, GUARD, <span class="number">9</span>, <span class="number">3</span>);</span><br><span class="line">        p[<span class="number">2</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, GUARD, <span class="number">9</span>, <span class="number">5</span>);</span><br><span class="line">        p[<span class="number">3</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, ELEPHANT, <span class="number">9</span>, <span class="number">2</span>);</span><br><span class="line">        p[<span class="number">4</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, ELEPHANT, <span class="number">9</span>, <span class="number">6</span>);</span><br><span class="line">        p[<span class="number">5</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, HORSE, <span class="number">9</span>, <span class="number">1</span>);</span><br><span class="line">        p[<span class="number">6</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, HORSE, <span class="number">9</span>, <span class="number">7</span>);</span><br><span class="line">        p[<span class="number">7</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, CAR, <span class="number">9</span>, <span class="number">0</span>);</span><br><span class="line">        p[<span class="number">8</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, CAR, <span class="number">9</span>, <span class="number">8</span>);</span><br><span class="line">        p[<span class="number">9</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, DUCK, <span class="number">7</span>, <span class="number">0</span>);</span><br><span class="line">        p[<span class="number">10</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, DUCK, <span class="number">7</span>, <span class="number">8</span>);</span><br><span class="line">        p[<span class="number">11</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, SOLDIER, <span class="number">6</span>, <span class="number">0</span>);</span><br><span class="line">        p[<span class="number">12</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, SOLDIER, <span class="number">6</span>, <span class="number">2</span>);</span><br><span class="line">        p[<span class="number">13</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, SOLDIER, <span class="number">6</span>, <span class="number">4</span>);</span><br><span class="line">        p[<span class="number">14</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, SOLDIER, <span class="number">6</span>, <span class="number">6</span>);</span><br><span class="line">        p[<span class="number">15</span>] = <span class="keyword">new</span> <span class="built_in">piece</span>(BLUE, SOLDIER, <span class="number">6</span>, <span class="number">8</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">blue</span>() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">delete</span> p[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 棋盘</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">board</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">board</span>();                                                <span class="comment">// 初始化棋盘上的棋子</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMove</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;           <span class="comment">// 能否将棋子移动到对应位置</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Move</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2, Camp cap)</span></span>;    <span class="comment">// 移动棋子</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isEnd</span><span class="params">()</span></span>;                                           <span class="comment">// 本局游戏是否结束</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">isDanger</span><span class="params">()</span></span>;                                        <span class="comment">// 当前棋局是否处于将军局面</span></span><br><span class="line">    <span class="function">piece* <span class="title">Lasteat</span><span class="params">()</span></span>;                                       <span class="comment">// 返回最后一步被吃掉的棋子</span></span><br><span class="line">    <span class="function">piece* <span class="title">get_piece</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>;                         <span class="comment">// 获取某个位置的棋子</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printBoard</span><span class="params">()</span></span>;                                      <span class="comment">// 打印棋盘</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    piece* b[<span class="number">10</span>][<span class="number">9</span>];       <span class="comment">// 10x9 的网格棋盘</span></span><br><span class="line">    red player_red;        <span class="comment">// 红方玩家</span></span><br><span class="line">    blue player_blue;      <span class="comment">// 蓝方玩家</span></span><br><span class="line">    piece* d = <span class="literal">nullptr</span>;    <span class="comment">// 最后一步被吃的棋子</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 玩家 p1 是否被玩家 p2 将军</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(player* p1, player* p2)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 能否将对应棋子移动到对应位置</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMoveCaptain</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMoveGuard</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMoveElephant</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMoveHorse</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMoveCar</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMoveDuck</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">canMoveSoldier</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------  棋盘的方法成员  -----------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化棋盘</span></span><br><span class="line">board::<span class="built_in">board</span>()</span><br><span class="line">    : <span class="built_in">d</span>(<span class="literal">nullptr</span>) &#123;</span><br><span class="line">    <span class="comment">// 棋盘初始化</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">9</span>; ++j) &#123;</span><br><span class="line">            b[i][j] = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 红方棋子摆上棋盘</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line">        piece* cur = player_red.p[i];</span><br><span class="line">        <span class="type">int</span> x = cur-&gt;<span class="built_in">get_x</span>(), y = cur-&gt;<span class="built_in">get_y</span>();</span><br><span class="line">        b[x][y] = cur;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 蓝方棋子摆上棋盘</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line">        piece* cur = player_blue.p[i];</span><br><span class="line">        <span class="type">int</span> x = cur-&gt;<span class="built_in">get_x</span>(), y = cur-&gt;<span class="built_in">get_y</span>();</span><br><span class="line">        b[x][y] = cur;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将棋子移动到对应位置(假设起始位置合法且有一枚棋子)</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">board::canMove</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 目标位置不合法</span></span><br><span class="line">    <span class="keyword">if</span> (x2 &lt; <span class="number">0</span> || x2 &gt; <span class="number">9</span> || y2 &lt; <span class="number">0</span> || y2 &gt; <span class="number">8</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 目标位置有己方棋子</span></span><br><span class="line">    <span class="keyword">if</span> (b[x2][y2] != <span class="literal">nullptr</span> &amp;&amp; b[x1][y1]-&gt;<span class="built_in">camp</span>() == b[x2][y2]-&gt;<span class="built_in">camp</span>())</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据当前位置棋子类型调用判断函数</span></span><br><span class="line">    <span class="keyword">switch</span> (b[x1][y1]-&gt;<span class="built_in">type</span>()) &#123;</span><br><span class="line">        <span class="keyword">case</span> CAPTAIN: <span class="keyword">return</span> <span class="built_in">canMoveCaptain</span>(x1, y1, x2, y2);</span><br><span class="line">        <span class="keyword">case</span> GUARD: <span class="keyword">return</span> <span class="built_in">canMoveGuard</span>(x1, y1, x2, y2);</span><br><span class="line">        <span class="keyword">case</span> ELEPHANT: <span class="keyword">return</span> <span class="built_in">canMoveElephant</span>(x1, y1, x2, y2);</span><br><span class="line">        <span class="keyword">case</span> HORSE: <span class="keyword">return</span> <span class="built_in">canMoveHorse</span>(x1, y1, x2, y2);</span><br><span class="line">        <span class="keyword">case</span> CAR: <span class="keyword">return</span> <span class="built_in">canMoveCar</span>(x1, y1, x2, y2);</span><br><span class="line">        <span class="keyword">case</span> DUCK: <span class="keyword">return</span> <span class="built_in">canMoveDuck</span>(x1, y1, x2, y2);</span><br><span class="line">        <span class="keyword">case</span> SOLDIER: <span class="keyword">return</span> <span class="built_in">canMoveSoldier</span>(x1, y1, x2, y2);</span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移动棋子,移动成功返回 true，否则返回 false</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">board::Move</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2, Camp cap)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 游戏已经结束不可移动</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isEnd</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 检查起始位置是否合法，是否有一个棋子</span></span><br><span class="line">    <span class="keyword">if</span> (x1 &lt; <span class="number">0</span> || x1 &gt; <span class="number">9</span> || y1 &lt; <span class="number">0</span> || y1 &gt; <span class="number">8</span> || b[x1][y1] == <span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 起始位置的棋子是否是所给的阵营</span></span><br><span class="line">    <span class="keyword">if</span> (b[x1][y1]-&gt;<span class="built_in">camp</span>() != cap) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// 检查目的地是否可达</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">canMove</span>(x1, y1, x2, y2)) &#123;</span><br><span class="line">        <span class="comment">// 目的地可达那就移动</span></span><br><span class="line">        <span class="keyword">if</span> (b[x2][y2] != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            <span class="comment">// 吃掉目的地的棋子</span></span><br><span class="line">            b[x2][y2]-&gt;<span class="built_in">dead</span>();</span><br><span class="line">            d = b[x2][y2];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            d = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="comment">// 移动棋子</span></span><br><span class="line">        b[x1][y1]-&gt;<span class="built_in">move</span>(x2, y2);</span><br><span class="line">        b[x2][y2] = b[x1][y1];</span><br><span class="line">        b[x1][y1] = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 游戏是否结束</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::isEnd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 判断双方王是否存活即可</span></span><br><span class="line">    <span class="keyword">if</span> (player_red.p[<span class="number">0</span>]-&gt;<span class="built_in">isLive</span>() &amp;&amp; player_blue.p[<span class="number">0</span>]-&gt;<span class="built_in">isLive</span>())</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 玩家 p1 是否被玩家 p2 将军</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">board::check</span><span class="params">(player* p1, player* p2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// p1 王的位置</span></span><br><span class="line">    <span class="type">int</span> x = p1-&gt;p[<span class="number">0</span>]-&gt;<span class="built_in">get_x</span>(), y = p1-&gt;p[<span class="number">0</span>]-&gt;<span class="built_in">get_y</span>();</span><br><span class="line">    <span class="comment">// 逐个棋子检查能否攻击到王</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">16</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p2-&gt;p[i]-&gt;<span class="built_in">isLive</span>() &amp;&amp; <span class="built_in">canMove</span>(p2-&gt;p[i]-&gt;<span class="built_in">get_x</span>(), p2-&gt;p[i]-&gt;<span class="built_in">get_y</span>(), x, y))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::isDanger</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 结束局面不可能是将军局面</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isEnd</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">check</span>(&amp;player_red, &amp;player_blue) || <span class="built_in">check</span>(&amp;player_blue, &amp;player_red);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> piece* <span class="title">board::Lasteat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> piece* <span class="title">board::get_piece</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b[x][y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将 王 移动到对应位置（假设当前位置有王且目标位置合法）</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::canMoveCaptain</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 王只能上下左右移动</span></span><br><span class="line">    <span class="keyword">if</span> (x1 == x2 &amp;&amp; (y1 - y2 == <span class="number">1</span> || y2 - y1 == <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (y1 == y2 &amp;&amp; (x1 - x2 == <span class="number">1</span> || x2 - x1 == <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将 士 移动到对应位置（假设当前位置有士且目标位置合法）</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::canMoveGuard</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 士只能斜着移动</span></span><br><span class="line">    <span class="keyword">if</span> (x1 + <span class="number">1</span> == x2 &amp;&amp; y1 + <span class="number">1</span> == y2)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x1 - <span class="number">1</span> == x2 &amp;&amp; y1 - <span class="number">1</span> == y2)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x1 + <span class="number">1</span> == x2 &amp;&amp; y1 - <span class="number">1</span> == y2)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x1 - <span class="number">1</span> == x2 &amp;&amp; y1 + <span class="number">1</span> == y2)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将 象 移动到对应位置（假设当前位置有象且目标位置合法）</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::canMoveElephant</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 象只能走田字且中间不能有棋子</span></span><br><span class="line">    <span class="keyword">if</span> (x1 + <span class="number">2</span> == x2 &amp;&amp; y1 + <span class="number">2</span> == y2 &amp;&amp; b[x1 + <span class="number">1</span>][y1 + <span class="number">1</span>] == <span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x1 - <span class="number">2</span> == x2 &amp;&amp; y1 + <span class="number">2</span> == y2 &amp;&amp; b[x1 - <span class="number">1</span>][y1 + <span class="number">1</span>] == <span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x1 + <span class="number">2</span> == x2 &amp;&amp; y1 - <span class="number">2</span> == y2 &amp;&amp; b[x1 + <span class="number">1</span>][y1 - <span class="number">1</span>] == <span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x1 - <span class="number">2</span> == x2 &amp;&amp; y1 - <span class="number">2</span> == y2 &amp;&amp; b[x1 - <span class="number">1</span>][y1 - <span class="number">1</span>] == <span class="literal">nullptr</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将 马 移动到对应位置（假设当前位置有马且目标位置合法）</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::canMoveHorse</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 马走日字且中间不能有其他棋子</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">-1</span>; i &lt;= <span class="number">1</span>; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">-1</span>; j &lt;= <span class="number">1</span>; j += <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x1 + i * <span class="number">2</span> == x2 &amp;&amp; y1 + j == y2 &amp;&amp; b[x1 + i][y1] == <span class="literal">nullptr</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (x1 + i == x2 &amp;&amp; y1 + j * <span class="number">2</span> == y2 &amp;&amp; b[x1][y1 + j] == <span class="literal">nullptr</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将 车 移动到对应位置（假设当前位置有车且目标位置合法）</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::canMoveCar</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 车可以在不跨越其他棋子的情况下到达同行或同列的任意位置</span></span><br><span class="line">    <span class="keyword">if</span> (x1 == x2) &#123;</span><br><span class="line">        <span class="type">int</span> dir = y2 - y1 &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">-1</span>;    <span class="comment">// 向左还是向右</span></span><br><span class="line">        <span class="type">bool</span> tmp = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = y1 + dir; i != y2; i += dir) &#123;</span><br><span class="line">            <span class="keyword">if</span> (b[x1][i] != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                tmp = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tmp) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (y1 == y2) &#123;</span><br><span class="line">        <span class="type">int</span> dir = x2 - x1 &gt; <span class="number">0</span> ? <span class="number">1</span> : <span class="number">-1</span>;</span><br><span class="line">        <span class="type">bool</span> tmp = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = x1 + dir; i != x2; i += dir) &#123;</span><br><span class="line">            <span class="keyword">if</span> (b[i][y1] != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">                tmp = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tmp) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将 鸭 移动到对应位置（假设当前位置有鸭且目标位置合法）</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::canMoveDuck</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 不懂，照本宣科</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">-1</span>; i &lt;= <span class="number">1</span>; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">-1</span>; j &lt;= <span class="number">1</span>; j += <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x1 + i * <span class="number">3</span> == x2 &amp;&amp; y1 + j * <span class="number">2</span> == y2 &amp;&amp; b[x1 + i * <span class="number">2</span>][y1 + j] == <span class="literal">nullptr</span> &amp;&amp; b[x1 + i][y1] == <span class="literal">nullptr</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (x1 + i * <span class="number">2</span> == x2 &amp;&amp; y1 + j * <span class="number">3</span> == y2 &amp;&amp; b[x1 + i][y1 + j * <span class="number">2</span>] == <span class="literal">nullptr</span> &amp;&amp; b[x1][y1 + j] == <span class="literal">nullptr</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 能否将 兵 移动到对应位置（假设当前位置有兵且目标位置合法）</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">board::canMoveSoldier</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 周围八个位置</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">-1</span>; i &lt;= <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">-1</span>; j &lt;= <span class="number">1</span>; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x1 + i == x2 &amp;&amp; y1 + j == y2)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 格式化输出棋盘</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">board::printBoard</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">9</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">8</span>; j &gt;= <span class="number">0</span>; --j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (b[i][j] == <span class="literal">nullptr</span>)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;十 &quot;</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                cout &lt;&lt; b[i][j]-&gt;<span class="built_in">print_piece</span>() &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------  END - 棋盘的方法成员  -----------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------  棋子的方法成员  -----------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造函数，传入阵营，类型，坐标</span></span><br><span class="line">piece::<span class="built_in">piece</span>(Camp _color, PIECE _p, <span class="type">int</span> _x, <span class="type">int</span> _y)</span><br><span class="line">    : <span class="built_in">color</span>(_color), <span class="built_in">p</span>(_p), <span class="built_in">x</span>(_x), <span class="built_in">y</span>(_y) &#123;</span><br><span class="line">    save = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回当前横坐标</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">piece::get_x</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  返回当前纵坐标</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">piece::get_y</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否还在棋盘上</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">piece::isLive</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;save;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 被吃</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">piece::dead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;save = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 吃掉棋子</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">piece::eat</span><span class="params">(piece* p)</span> </span>&#123;</span><br><span class="line">    p-&gt;<span class="built_in">dead</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移动棋子到指定位置</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">piece::move</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;x = x;</span><br><span class="line">    <span class="keyword">this</span>-&gt;y = y;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回所属阵营</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> Camp <span class="title">piece::camp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回棋子类型</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> PIECE <span class="title">piece::type</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> string <span class="title">piece::print_piece</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (p) &#123;</span><br><span class="line">        <span class="keyword">case</span> CAPTAIN: <span class="keyword">return</span> <span class="string">&quot;王&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> GUARD: <span class="keyword">return</span> <span class="string">&quot;士&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> ELEPHANT: <span class="keyword">return</span> <span class="string">&quot;象&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> HORSE: <span class="keyword">return</span> <span class="string">&quot;马&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> CAR: <span class="keyword">return</span> <span class="string">&quot;车&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> DUCK: <span class="keyword">return</span> <span class="string">&quot;鸭&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> SOLDIER: <span class="keyword">return</span> <span class="string">&quot;兵&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span>: <span class="keyword">return</span> <span class="string">&quot;无&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回 [阵营] [类型] 的字符串</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> string <span class="title">piece::tostring</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string c = color == RED ? <span class="string">&quot;red &quot;</span> : <span class="string">&quot;blue &quot;</span>;</span><br><span class="line">    string t;</span><br><span class="line">    <span class="keyword">switch</span> (p) &#123;</span><br><span class="line">        <span class="keyword">case</span> CAPTAIN: t = <span class="string">&quot;captain&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> GUARD: t = <span class="string">&quot;guard&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> ELEPHANT: t = <span class="string">&quot;elephant&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> HORSE: t = <span class="string">&quot;horse&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> CAR: t = <span class="string">&quot;car&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> DUCK: t = <span class="string">&quot;duck&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SOLDIER: t = <span class="string">&quot;soldier&quot;</span>; <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>: t = <span class="string">&quot;err&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c + t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// -------------------  END - 棋子的方法成员  -----------------------</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> Q;    <span class="comment">// 操作序列的长度</span></span><br><span class="line"><span class="type">int</span> x_s, y_s, <span class="type">x_t</span>, <span class="type">y_t</span>;</span><br><span class="line">Camp c;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// freopen(&quot;luogu.in&quot;, &quot;r&quot;, stdin);      // 输入流重定向</span></span><br><span class="line">    <span class="comment">// freopen(&quot;luogu.out&quot;, &quot;w&quot;, stdout);    // 输出流重定向</span></span><br><span class="line"></span><br><span class="line">    board b;</span><br><span class="line">    c = RED;    <span class="comment">// 红方先动</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// b.printBoard();</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;Q);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; Q; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>, &amp;x_s, &amp;y_s, &amp;<span class="type">x_t</span>, &amp;<span class="type">y_t</span>);</span><br><span class="line">        <span class="keyword">if</span> (b.<span class="built_in">Move</span>(x_s, y_s, <span class="type">x_t</span>, <span class="type">y_t</span>, c)) &#123;</span><br><span class="line">            <span class="comment">// 这步操作移动了哪个棋子</span></span><br><span class="line">            cout &lt;&lt; b.<span class="built_in">get_piece</span>(<span class="type">x_t</span>, <span class="type">y_t</span>)-&gt;<span class="built_in">tostring</span>() &lt;&lt; <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line">            <span class="comment">// 这步操作后，是否存在棋子被移出游戏，如有则还需求出被移出游戏的棋子</span></span><br><span class="line">            cout &lt;&lt; (b.<span class="built_in">Lasteat</span>() == <span class="literal">nullptr</span> ? <span class="string">&quot;NA&quot;</span> : b.<span class="built_in">Lasteat</span>()-&gt;<span class="built_in">tostring</span>()) &lt;&lt; <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line">            <span class="comment">// 这步操作后，是否形成将军局面</span></span><br><span class="line">            cout &lt;&lt; (b.<span class="built_in">isDanger</span>() ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>) &lt;&lt; <span class="string">&#x27;;&#x27;</span>;</span><br><span class="line">            <span class="comment">// 这步操作后，游戏是否结束</span></span><br><span class="line">            cout &lt;&lt; (b.<span class="built_in">isEnd</span>() ? <span class="string">&quot;yes&quot;</span> : <span class="string">&quot;no&quot;</span>);</span><br><span class="line">            cout &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">            c = c == RED ? BLUE : RED;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;Invalid command\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// cout &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">        <span class="comment">// b.printBoard();</span></span><br><span class="line">        <span class="comment">// cout &lt;&lt; &#x27;\n&#x27;;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>MeteorDream
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://meteordream.github.io/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E6%A8%A1%E6%8B%9F.html" title="『洛谷』模拟">https://meteordream.github.io/Luogu/基础算法/2022-09/模拟.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <div>
        
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">--- ♥ end ♥ ---</div>
    
</div>
        
      </div>
        

  <div class="followme">
    <p>欢迎关注我呀~</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://github.com/MeteorDream">
            <span class="icon">
              <i class="fab fa-github"></i>
            </span>

            <span class="label">GitHub</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://leetcode-cn.com/u/meteordream/">
            <span class="icon">
              <i class="fab fa-envira"></i>
            </span>

            <span class="label">LeetCode</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Luogu/" rel="tag"><i class="fa fa-tag"></i> Luogu</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E9%80%92%E5%BD%92.html" rel="prev" title="『洛谷』递归">
      <i class="fa fa-chevron-left"></i> 『洛谷』递归
    </a></div>
      <div class="post-nav-item">
    <a href="/Luogu/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/2022-09/%E6%8E%92%E5%BA%8F.html" rel="next" title="『洛谷』排序">
      『洛谷』排序 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          梦境概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95-%E6%A8%A1%E6%8B%9F"><span class="nav-number">1.</span> <span class="nav-text">基础算法-模拟</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p1003-noip2011-%E6%8F%90%E9%AB%98%E7%BB%84-%E9%93%BA%E5%9C%B0%E6%AF%AF"><span class="nav-number">2.</span> <span class="nav-text">P1003 [NOIP2011 提高组]
铺地毯</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0"><span class="nav-number">2.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F"><span class="nav-number">2.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F"><span class="nav-number">2.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B"><span class="nav-number">2.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA"><span class="nav-number">2.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF"><span class="nav-number">2.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81"><span class="nav-number">2.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p1067-noip2009-%E6%99%AE%E5%8F%8A%E7%BB%84-%E5%A4%9A%E9%A1%B9%E5%BC%8F%E8%BE%93%E5%87%BA"><span class="nav-number">3.</span> <span class="nav-text">P1067 [NOIP2009 普及组]
多项式输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1"><span class="nav-number">3.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-1"><span class="nav-number">3.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-1"><span class="nav-number">3.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-1"><span class="nav-number">3.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-1"><span class="nav-number">3.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-1"><span class="nav-number">3.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-1"><span class="nav-number">3.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p1328-noip2014-%E6%8F%90%E9%AB%98%E7%BB%84-%E7%94%9F%E6%B4%BB%E5%A4%A7%E7%88%86%E7%82%B8%E7%89%88%E7%9F%B3%E5%A4%B4%E5%89%AA%E5%88%80%E5%B8%83"><span class="nav-number">4.</span> <span class="nav-text">P1328 [NOIP2014
提高组] 生活大爆炸版石头剪刀布</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2"><span class="nav-number">4.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-2"><span class="nav-number">4.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-2"><span class="nav-number">4.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-2"><span class="nav-number">4.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-2"><span class="nav-number">4.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-2"><span class="nav-number">4.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-2"><span class="nav-number">4.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p1563-noip2016-%E6%8F%90%E9%AB%98%E7%BB%84-%E7%8E%A9%E5%85%B7%E8%B0%9C%E9%A2%98"><span class="nav-number">5.</span> <span class="nav-text">P1563 [NOIP2016 提高组]
玩具谜题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-3"><span class="nav-number">5.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-3"><span class="nav-number">5.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-3"><span class="nav-number">5.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-3"><span class="nav-number">5.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-3"><span class="nav-number">5.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-3"><span class="nav-number">5.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-3"><span class="nav-number">5.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p1042-noip2003-%E6%99%AE%E5%8F%8A%E7%BB%84-%E4%B9%92%E4%B9%93%E7%90%83"><span class="nav-number">6.</span> <span class="nav-text">P1042 [NOIP2003 普及组]
乒乓球</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-4"><span class="nav-number">6.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-4"><span class="nav-number">6.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-4"><span class="nav-number">6.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-4"><span class="nav-number">6.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-4"><span class="nav-number">6.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-4"><span class="nav-number">6.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-4"><span class="nav-number">6.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p1179-noip2010-%E6%99%AE%E5%8F%8A%E7%BB%84-%E6%95%B0%E5%AD%97%E7%BB%9F%E8%AE%A1"><span class="nav-number">7.</span> <span class="nav-text">P1179 [NOIP2010 普及组]
数字统计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-5"><span class="nav-number">7.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-5"><span class="nav-number">7.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-5"><span class="nav-number">7.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-5"><span class="nav-number">7.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-5"><span class="nav-number">7.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-5"><span class="nav-number">7.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-5"><span class="nav-number">7.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p2615-noip2015-%E6%8F%90%E9%AB%98%E7%BB%84-%E7%A5%9E%E5%A5%87%E7%9A%84%E5%B9%BB%E6%96%B9"><span class="nav-number">8.</span> <span class="nav-text">P2615 [NOIP2015 提高组]
神奇的幻方</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-6"><span class="nav-number">8.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-6"><span class="nav-number">8.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-6"><span class="nav-number">8.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-6"><span class="nav-number">8.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-6"><span class="nav-number">8.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-6"><span class="nav-number">8.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-6"><span class="nav-number">8.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p3952-noip2017-%E6%8F%90%E9%AB%98%E7%BB%84-%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="nav-number">9.</span> <span class="nav-text">P3952 [NOIP2017 提高组]
时间复杂度</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-7"><span class="nav-number">9.1.</span> <span class="nav-text">题目描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-7"><span class="nav-number">9.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-7"><span class="nav-number">9.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-7"><span class="nav-number">9.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-7"><span class="nav-number">9.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-7"><span class="nav-number">9.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-7"><span class="nav-number">9.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p2482-sdoi2010%E7%8C%AA%E5%9B%BD%E6%9D%80"><span class="nav-number">10.</span> <span class="nav-text">P2482 [SDOI2010]猪国杀</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-8"><span class="nav-number">10.1.</span> <span class="nav-text">题目描述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%B8%E6%88%8F%E8%83%8C%E6%99%AF"><span class="nav-number">10.1.1.</span> <span class="nav-text">游戏背景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%B8%E6%88%8F%E7%9B%AE%E7%9A%84"><span class="nav-number">10.1.2.</span> <span class="nav-text">游戏目的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B8%B8%E6%88%8F%E8%BF%87%E7%A8%8B"><span class="nav-number">10.1.3.</span> <span class="nav-text">游戏过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%84%E7%A7%8D%E7%89%8C%E4%BB%8B%E7%BB%8D"><span class="nav-number">10.1.4.</span> <span class="nav-text">各种牌介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%89%8C"><span class="nav-number">10.1.5.</span> <span class="nav-text">基本牌</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%94%A6%E5%9B%8A%E7%89%8C"><span class="nav-number">10.1.6.</span> <span class="nav-text">锦囊牌</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A3%85%E5%A4%87%E7%89%8C"><span class="nav-number">10.1.7.</span> <span class="nav-text">装备牌</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E4%BA%8B%E4%BB%B6%E5%8F%8A%E6%A6%82%E5%BF%B5%E8%A7%A3%E9%87%8A"><span class="nav-number">10.1.8.</span> <span class="nav-text">特殊事件及概念解释</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%A0%E7%A7%8D%E8%A1%8C%E4%B8%BA"><span class="nav-number">10.1.9.</span> <span class="nav-text">几种行为</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%8C%E5%8A%A8%E5%87%86%E5%88%99"><span class="nav-number">10.1.10.</span> <span class="nav-text">行动准则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B1%E6%80%A7"><span class="nav-number">10.1.11.</span> <span class="nav-text">共性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%B9%E6%80%A7"><span class="nav-number">10.1.12.</span> <span class="nav-text">特性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-8"><span class="nav-number">10.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-8"><span class="nav-number">10.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-8"><span class="nav-number">10.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-8"><span class="nav-number">10.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-8"><span class="nav-number">10.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-8"><span class="nav-number">10.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p5380-thupc2019%E9%B8%AD%E6%A3%8B"><span class="nav-number">11.</span> <span class="nav-text">P5380 [THUPC2019]鸭棋</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-9"><span class="nav-number">11.1.</span> <span class="nav-text">题目描述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E8%83%8C%E6%99%AF"><span class="nav-number">11.1.1.</span> <span class="nav-text">题目背景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A3%8B%E5%AD%90%E7%B1%BB%E5%9E%8B%E4%B8%8E%E8%B5%B0%E5%AD%90%E8%A7%84%E5%88%99"><span class="nav-number">11.1.2.</span> <span class="nav-text">棋子类型与走子规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%83%9C%E5%88%A9%E6%9D%A1%E4%BB%B6%E4%B8%8E%E5%B0%86%E5%86%9B%E5%B1%80%E9%9D%A2"><span class="nav-number">11.1.3.</span> <span class="nav-text">胜利条件与将军局面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-10"><span class="nav-number">11.1.4.</span> <span class="nav-text">题目描述</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-9"><span class="nav-number">11.2.</span> <span class="nav-text">输入格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-9"><span class="nav-number">11.3.</span> <span class="nav-text">输出格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B-9"><span class="nav-number">11.4.</span> <span class="nav-text">输入输出样例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E%E6%8F%90%E7%A4%BA-9"><span class="nav-number">11.5.</span> <span class="nav-text">说明&amp;提示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%A2%98%E6%80%9D%E8%B7%AF-9"><span class="nav-number">11.6.</span> <span class="nav-text">解题思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E7%AD%94%E4%BB%A3%E7%A0%81-9"><span class="nav-number">11.7.</span> <span class="nav-text">解答代码</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="小鲸鱼"
      src="/images/shizuku.png">
  <p class="site-author-name" itemprop="name">小鲸鱼</p>
  <div class="site-description" itemprop="description">小鲸鱼只有七秒钟的记忆</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">233</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">94</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/MeteorDream" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MeteorDream" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hy1368068258@163.com" title="E-Mail → mailto:hy1368068258@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://meteordream.github.io/" title="感谢 → https:&#x2F;&#x2F;meteordream.github.io"><i class="fa fa-kiss-wink-heart fa-fw"></i>感谢</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://leetcode.cn/u/meteordream/" title="LeetCode → https:&#x2F;&#x2F;leetcode.cn&#x2F;u&#x2F;meteordream&#x2F;" rel="noopener" target="_blank"><i class="fab fa-envira fa-fw"></i>LeetCode</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021-04 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小鲸鱼</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.3m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">20:16</span>
</div><script color="0,0,255" opacity="0.6" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js">
</script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.bootcdn.net/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>


  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'n9rYOoqPd5IsOQpuSgyY7ci3-gzGzoHsz',
      appKey     : '0BuiiqBGewzAwktQnJ9vXQMB',
      placeholder: "想和小鲸鱼说些什么吗~ (评论区支持MarkDown语法哦~)",
      avatar     : 'mp',
      meta       : guest,
      pageSize   : '20' || 10,
      visitor    : false,
      lang       : 'zh-CN' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"superSample":2,"width":200,"height":400,"position":"right","hOffset":30,"vOffset":-30},"mobile":{"show":true,"opacity":0.5,"scale":0.3},"react":{"opacity":0.7,"opacityOnHover":0.2},"log":false});</script></body>

  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>

</html>
