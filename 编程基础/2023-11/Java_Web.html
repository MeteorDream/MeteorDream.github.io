<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/Whale-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/Whale-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/Whale-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="-3vYeYUI32tNnZYynn6m9TEd8b35o91ejIEgj9md_1o">
  <meta name="msvalidate.01" content="52EA62B6D6E7019FD9854082F76A21EA">
  <meta name="baidu-site-verification" content="code-AlOkWF1yk4">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-material.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"meteordream.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":250,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="前言 学习了下 Java Web 开发相关的内容">
<meta property="og:type" content="article">
<meta property="og:title" content="Java Web 后端总述">
<meta property="og:url" content="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web.html">
<meta property="og:site_name" content="小鲸鱼的梦境">
<meta property="og:description" content="前言 学习了下 Java Web 开发相关的内容">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web/1668857055058.png">
<meta property="og:image" content="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web/image-20231113114402902.png">
<meta property="og:image" content="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web/image-20231113191220858.png">
<meta property="article:published_time" content="2023-11-13T03:10:43.000Z">
<meta property="article:modified_time" content="2023-11-13T03:10:43.000Z">
<meta property="article:author" content="小鲸鱼">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web/1668857055058.png">

<link rel="canonical" href="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Java Web 后端总述 | 小鲸鱼的梦境</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">小鲸鱼的梦境</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/shizuku.png">
      <meta itemprop="name" content="小鲸鱼">
      <meta itemprop="description" content="小鲸鱼只有七秒钟的记忆">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="小鲸鱼的梦境">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java Web 后端总述
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-13 11:10:43" itemprop="dateCreated datePublished" datetime="2023-11-13T11:10:43+08:00">2023-11-13</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">编程基础</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web.html#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="前言">前言</h2>
<p>学习了下 Java Web 开发相关的内容</p>
<span id="more"></span>
<h2 id="概要">概要</h2>
<p>首先，Web 开发分前后端，主流开发模式是前后端分离的</p>
<ul>
<li>前端：HTML, CSS, JavaScript/TypeScript
<ul>
<li>HTML，CSS 主要是网页展示，详情可以看 <a target="_blank" rel="noopener" href="https://www.w3school.com.cn/index.html" class="uri">https://www.w3school.com.cn/index.html</a></li>
<li>JS 主要处理动态网页相关内容，主要相关的有 BOM(浏览器对象),
DOM(HTML文档对象) 以及事件绑定</li>
</ul></li>
<li>后端：处理前端请求，返回结果
<ul>
<li>主要了解 Springboot</li>
</ul></li>
</ul>
<p>在Spring框架的生态中，对web程序开发提供了很好的支持，如：全局异常处理器、拦截器这些都是Spring框架中web开发模块所提供的功能，而Spring框架的web开发模块，我们也称为：SpringMVC</p>
<blockquote>
<p>SpringMVC不是一个单独的框架，它是Spring框架的一部分，是Spring框架中的web开发模块，是用来简化原始的Servlet程序开发的。</p>
</blockquote>
<p>外界俗称的SSM，就是由：SpringMVC、Spring
Framework、Mybatis三块组成。</p>
<p>基于传统的SSM框架进行整合开发项目会比较繁琐，而且效率也比较低，所以在现在的企业项目开发当中，基本上都是直接基于SpringBoot整合SSM进行项目开发的。</p>
<hr>
<h2 id="前端部分">前端部分</h2>
<p>HTML 和 CSS 就不过多研究了，主要看看 JS</p>
<h3 id="vue">Vue</h3>
<p>一个完整的html页面包括了视图和数据，数据是通过请求从后台获取的，那么意味着我们需要将后台获取到的数据呈现到页面上，很明显，
这就需要我们使用DOM操作。正因为这种开发流程，所以我们引入了一种叫做<strong>MVVM(Model-View-ViewModel)的前端开发思想</strong>，即让我们开发者更加关注数据，而非数据绑定到视图这种机械化的操作。那么具体什么是MVVM思想呢？</p>
<p>MVVM:其实是Model-View-ViewModel的缩写，具体释义如下：</p>
<ul>
<li>Model: 数据模型，特指前端中通过请求从后台获取的数据</li>
<li>View:
视图，用于展示数据的页面，可以理解成我们的html+css搭建的页面，但是没有数据</li>
<li>ViewModel:
数据绑定到视图，负责将数据（Model）通过JavaScript的DOM技术，将数据展示到视图（View）上</li>
</ul>
<p>如图所示就是MVVM开发思想的含义：</p>
<p><img data-src="Java_Web/1668857055058.png" alt="1668857055058"></p>
<p>基于上述的MVVM思想，其中的 Model 可以通过 Ajax
来发起请求从后台获取；ViewModel部分使用 vue
前端框架替代JavaScript的DOM操作，让数据展示到视图的代码开发变得更加的简单。</p>
<h3 id="ajax">AJAX</h3>
<p>Ajax: 全称Asynchronous JavaScript And
XML，异步的JavaScript和XML。其作用有如下2点：</p>
<ul>
<li>与服务器进行数据交换：通过Ajax可以给服务器发送请求，并获取服务器响应的数据。</li>
<li>异步交互：可以在<strong>不重新加载整个页面</strong>的情况下，与服务器交换数据并<strong>更新部分网页</strong>的技术，如：搜索联想、用户名是否可用的校验等等。</li>
</ul>
<p>Ajax 可以了解下 Axios，是一个对 Ajax 进行封装简化的框架。</p>
<h3 id="部署">部署</h3>
<p>前端程序开发完成后是前端的部署，可以使用 nginx 进行部署</p>
<p>nginx:
Nginx是一款轻量级的Web服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器。其特点是占有内存少，并发能力强，在各大型互联网公司都有非常广泛的使用。</p>
<h2 id="接口">接口</h2>
<p>基于前后端分离开发的模式下的流程如下：</p>
<ol type="1">
<li>需求分析：首先我们需要阅读需求文档，分析需求，理解需求。</li>
<li>接口定义：查询接口文档中关于需求的接口的定义，包括地址，参数，响应数据类型等等</li>
<li>前后台并行开发：各自按照接口文档进行开发，实现需求</li>
<li>测试：前后台开发完了，各自按照接口文档进行测试</li>
<li>前后段联调测试：前段工程请求后端工程，测试功能</li>
</ol>
<p>接口即前后端接洽的部分，学习课程中介绍了 Yapi 来管理接口文档。</p>
<h2 id="项目管理">项目管理</h2>
<p>项目管理使用 Maven 进行</p>
<p>Apache Maven是一个项目管理和构建工具，它基于项目对象模型(Project
Object Model , 简称:
POM)的概念，通过一小段描述信息来管理项目的构建、报告和文档。</p>
<p>官网：https://maven.apache.org/</p>
<p>Maven的作用：</p>
<ol type="1">
<li>方便的依赖管理</li>
<li>统一的项目结构</li>
<li>标准的项目构建流程</li>
</ol>
<p><img data-src="Java_Web/image-20231113114402902.png" alt="image-20231113114402902"></p>
<h2 id="springboot">SpringBoot</h2>
<h3 id="简介">简介</h3>
<p>SpringBoot
是后端开发的一个框架，可以快速的构建应用程序，其最大的特点有两个 ：</p>
<ul>
<li>简化配置</li>
<li>快速开发</li>
</ul>
<h3 id="web服务器">Web服务器</h3>
<p>在网络服务器中，使用的基本协议是 HTTP 协议，但 HTTP
协议解析还是有些繁琐的，但同样有封装好的 Web
服务器可以解决协议解析的问题，例如 TomCat</p>
<p>Tomcat服务器软件是一个免费的开源的web应用服务器。是Apache软件基金会的一个核心项目。由Apache，Sun和其他一些公司及个人共同开发而成。</p>
<p>由于Tomcat只支持Servlet/JSP少量JavaEE规范，所以是一个开源免费的轻量级Web服务器。</p>
<blockquote>
<p>JavaEE规范： JavaEE =&gt; Java Enterprise Edition(Java企业版)</p>
<p>avaEE规范就是指Java企业级开发的技术规范总和。包含13项技术规范：JDBC、JNDI、EJB、RMI、JSP、Servlet、XML、JMS、Java
IDL、JTS、JTA、JavaMail、JAF</p>
</blockquote>
<p>因为Tomcat支持Servlet/JSP规范，所以Tomcat也被称为Web容器、Servlet容器。JavaWeb程序需要依赖Tomcat才能运行。</p>
<p>Tomcat的官网: https://tomcat.apache.org/</p>
<p>当然，实际上 SpringBoot 框架中已经集成了 Tomcat 服务器了。</p>
<blockquote>
<p>在SpringBoot进行web程序开发时，它内置了一个核心的 Servlet 程序
DispatcherServlet，称之为 核心控制器。 DispatcherServlet
负责接收页面发送的请求，然后根据执行的规则，将请求再转发给后面的请求处理器Controller，请求处理器处理完请求之后，最终再由DispatcherServlet给浏览器响应数据。浏览器发送请求，会携带请求数据，包括：请求行、请求头；请求到达tomcat之后，tomcat会负责解析这些请求数据，然后呢将解析后的请求数据会传递给Servlet程序的HttpServletRequest对象，那也就意味着
HttpServletRequest 对象就可以获取到请求数据。
而Tomcat，还给Servlet程序传递了一个参数
HttpServletResponse，通过这个对象，我们就可以给浏览器设置响应数据 。</p>
</blockquote>
<h3 id="三层架构">三层架构</h3>
<p>在我们进行程序设计以及程序开发时，尽可能让每一个接口、类、方法的职责更单一些（单一职责原则）。</p>
<blockquote>
<p>单一职责原则：一个类或一个方法，就只做一件事情，只管一块功能。</p>
<p>这样就可以让类、接口、方法的复杂度更低，可读性更强，扩展性更好，也更利用后期的维护。</p>
</blockquote>
<p>常见后端的处理逻辑从组成上看可以分为三个部分：</p>
<ul>
<li>数据访问：负责业务数据的维护操作，包括增、删、改、查等操作。</li>
<li>逻辑处理：负责业务逻辑处理的代码。</li>
<li>请求处理、响应数据：负责，接收页面的请求，给页面响应数据。</li>
</ul>
<p>按照上述的三个组成部分，可以将代码分为三层：</p>
<ul>
<li>Controller：控制层。接收前端发送的请求，对请求进行处理，并响应数据。</li>
<li>Service：业务逻辑层。处理具体的业务逻辑。</li>
<li>Dao：数据访问层(Data Access
Object)，也称为持久层。负责数据访问操作，包括数据的增、删、改、查。</li>
</ul>
<p>基于三层架构的程序执行流程：</p>
<ul>
<li>前端发起的请求，由Controller层接收（Controller响应数据给前端）</li>
<li>Controller层调用Service层来进行逻辑处理（Service层处理完后，把处理结果返回给Controller层）</li>
<li>Serivce层调用Dao层（逻辑处理过程中需要用到的一些数据要从Dao层获取）</li>
<li>Dao层操作文件中的数据（Dao拿到的数据会返回给Service层）</li>
</ul>
<h3 id="分层解耦">分层解耦</h3>
<p>三层架构的等之间是有依赖关系的，例如 Controller 必须依赖 Service
处理业务，这不符合高内聚低耦合的软件设计思想，于是引入了 Spring
中两个<strong>核心概念</strong>：</p>
<ul>
<li><strong>控制反转：</strong> Inversion Of
Control，简称IOC。对象的创建控制权由程序自身转移到外部（容器），这种思想称为控制反转。
<ul>
<li>对象的创建权由程序员主动创建转移到容器(由容器创建、管理对象)。这个容器称为：IOC
容器或 Spring 容器</li>
</ul></li>
<li><strong>依赖注入：</strong> Dependency
Injection，简称DI。容器为应用程序提供运行时，所依赖的资源，称之为依赖注入。
<ul>
<li>程序运行时需要某个资源，此时容器就为其提供这个资源。</li>
</ul></li>
</ul>
<p>IOC容器中创建、管理的对象，称之为：<strong>bean对象</strong>。</p>
<blockquote>
<p>简单来说，各个组件只需要定义自身的功能，对于依赖部分只需声明一个接口即可，Spring
会自动为接口注入对应的实例对象</p>
<p>而又依赖关系的对象将实例化的可以将实例化的步骤转移到 Spring
容器，Spring 容器会自动将标注为 Bean
的类进行实例化并注入到依赖模块中，从而实现模块间的解耦</p>
<p>可以视为一个网络，原本是很多计算机之间互相通信（依赖），但是现在有个管理员即
Spring
容器，各个计算机都搭建与管理员的通信信道（控制反转），管理员会负责牵线连接不同计算机之间的通信信道（即依赖注入），这样就不需要各个计算机自己去搭建固定的通信信道，只需向管理员请求通信即可动态的与其他计算机进行通信</p>
</blockquote>
<h3 id="数据操作">数据操作</h3>
<p>数据库的操作就不细说了，基本的增删查改是必须要的。但是在后端开发中需要访问修改数据库，这就需要使用
Java 程序操作数据库，一种解决方式是 MyBatis。</p>
<ul>
<li><p>MyBatis是一款优秀的 <strong>持久层</strong>
<strong>框架</strong>，用于简化JDBC的开发。</p>
<ul>
<li><p>持久层：指的是就是数据访问层(dao)，是用来操作数据库的。</p></li>
<li><p>框架：是一个半成品软件，是一套可重用的、通用的、软件基础代码模型。在框架的基础上进行软件开发更加高效、规范、通用、可拓展。</p></li>
<li><p>JDBC： ( Java DataBase Connectivity
)，就是使用Java语言操作关系型数据库的一套API。</p></li>
</ul></li>
<li><p>MyBatis本是
Apache的一个开源项目iBatis，2010年这个项目由apache迁移到了google
code，并且改名为MyBatis 。2013年11月迁移到Github。</p></li>
<li><p>官网：https://mybatis.org/mybatis-3/zh/index.html</p></li>
</ul>
<p>MyBatis 的功能就是解析代码中的 SQL
语句，然后操作数据库并返回结果，还有个注意点是mybatis中，使用了数据库连接池技术，避免频繁的创建连接、销毁连接而带来的资源浪费，简而言之就是避免每次执行
SQL
语句都要连接、销毁连接数据库的问题，具体解决思路类似线程池。常见的数据库连接池有：</p>
<p>常见的数据库连接池：</p>
<ul>
<li>C3P0</li>
<li>DBCP</li>
<li>Druid</li>
<li>Hikari (springboot默认)</li>
</ul>
<p>现在使用更多的是：Hikari(Tomcat 自带)、Druid （性能更优越）</p>
<h3 id="登录校验">登录校验</h3>
<p>登录校验指的是我们在服务器端接收到浏览器发送过来的请求之后，首先我们要对请求进行校验。先要校验一下用户登录了没有，如果用户已经登录了，就直接执行对应的业务操作就可以了；如果用户没有登录，此时就不允许他执行相关的业务操作，直接给前端响应一个错误的结果，最终跳转到登录页面，要求他登录成功之后，再来访问对应的数据。</p>
<p>HTTP协议是无状态协议，一次请求都是独立的，下一次请求并不会携带上一次请求的数据，要想解决登录校验的问题，有两个思路：</p>
<ol type="1">
<li>在用户登录成功后，需要将用户登录成功的信息存起来，记录用户已经登录成功的标记。</li>
<li>在浏览器发起请求时，需要在服务端进行统一拦截，拦截后进行登录校验。</li>
</ol>
<p>程序中所开发的查询功能、删除功能、添加功能、修改功能，都需要使用以上套路进行登录校验。此时就会出现：相同代码逻辑，每个功能都需要编写，就会造成代码非常繁琐。为了简化这块操作，可以使用一种技术：统一拦截技术。</p>
<p>通过统一拦截的技术，可以来拦截浏览器发送过来的所有的请求，拦截到这个请求之后，就可以通过请求来获取之前所存入的登录标记，在获取到登录标记且标记为登录成功，就说明用户已经登录了。</p>
<p>要完成以上操作，会涉及到web开发中的两个技术：</p>
<ol type="1">
<li>会话技术</li>
<li>统一拦截技术</li>
</ol>
<p>而统一拦截技术现实方案也有两种：</p>
<ol type="1">
<li>Servlet规范中的Filter过滤器</li>
<li>Spring提供的interceptor拦截器</li>
</ol>
<h4 id="会话技术">会话技术</h4>
<p>在web开发当中，会话指的就是浏览器与服务器之间的一次连接，我们就称为一次会话，一次会话中可以包含多次请求和响应。</p>
<p>会话跟踪：一种维护浏览器状态的方法，服务器需要识别多次请求是否来自于同一浏览器，以便在同一次会话的多次请求间共享数据。</p>
<p>会话跟踪技术有两种：</p>
<ol type="1">
<li>Cookie（客户端会话跟踪技术）
<ul>
<li>cookie
是客户端会话跟踪技术，它是存储在客户端浏览器的，其具体方法为：浏览器第一次发起请求来请求服务器的时候，在服务器端设置一个cookie，用于标志用户相关信息，而后的响应与请求均携带cookie，即可实现会话跟踪</li>
<li>cookie 它是 HTP 协议当中所支持的技术，一切都是自动化进行的</li>
<li>优点：HTTP协议中支持的技术（像Set-Cookie 响应头的解析以及 Cookie
请求头数据的携带，都是浏览器自动进行的，是无需手动操作的）</li>
<li>缺点：
<ul>
<li>移动端APP(Android、IOS)中无法使用Cookie</li>
<li>不安全，用户可以自己禁用Cookie</li>
<li>Cookie不能跨域（跨域指通信过程中 协议、IP、端口
的组合标记，任一不同则为不同的域）</li>
</ul></li>
</ul></li>
<li>Session（服务端会话跟踪技术）
<ul>
<li>数据存储在储在服务</li>
<li>浏览器在第一次请求服务器的时候，服务器会自动的创建一个会话对象Session
。而每一个会话对象Session
，它有一个ID。服务器端在给浏览器响应数据的时候，它会将 Session 的 ID
通过 Cookie 响应给浏览器。后续的每一次请求当中，都会将 Cookie
的数据获取出来，并且携带到服务端</li>
<li>优点：Session是存储在服务端的，安全</li>
<li>缺点：
<ul>
<li>服务器集群环境下无法直接使用Session</li>
<li>移动端APP(Android、IOS)中无法使用Cookie</li>
<li>用户可以自己禁用Cookie</li>
<li>Cookie不能跨域</li>
</ul></li>
</ul></li>
<li>令牌技术
<ul>
<li>所谓令牌，其实就是一个用户身份的标识，其实本质是一个字符串。</li>
<li>在浏览器发起请求登录成功后，会生成一个令牌作为用户的合法身份凭证。接下来响应数据的时候将令牌响应给前端，前端程序会保存令牌（Cookie或其他存储空间）。在后续的每一次请求当中，都需要将令牌携带到服务端。服务端会校验令牌的有效性。在同一次会话的多次请求之间，可以将共享的数据存储在令牌中</li>
<li>优点：
<ul>
<li>支持PC端、移动端</li>
<li>解决集群环境下的认证问题</li>
<li>减轻服务器的存储压力（无需在服务器端存储）</li>
</ul></li>
<li>缺点：需要自己实现（包括令牌的生成、令牌的传递、令牌的校验）</li>
</ul></li>
</ol>
<p>令牌计技术的一种实现方式：JWT</p>
<p>JWT全称：JSON Web Token （官网：https://jwt.io/）</p>
<ul>
<li><p>定义了一种简洁的、自包含的格式，用于在通信双方以json数据格式安全的传输信息。由于数字签名的存在，这些信息是可靠的。</p>
<blockquote>
<p>简洁：是指jwt就是一个简单的字符串。可以在请求参数或者是请求头当中直接传递。</p>
<p>自包含：指的是jwt令牌，看似是一个随机的字符串，但是我们是可以根据自身的需求在jwt令牌中存储自定义的数据内容。如：可以直接在jwt令牌中存储用户的相关信息。</p>
<p>简单来讲，jwt就是将原始的json数据格式进行了安全的封装，这样就可以直接基于jwt在通信双方安全的进行信息传输了。</p>
</blockquote></li>
</ul>
<p>JWT的组成：
（JWT令牌由三个部分组成，三个部分之间使用英文的点来分割）</p>
<ul>
<li><p>第一部分：Header(头）， 记录令牌类型、签名算法等。
例如：{"alg":"HS256","type":"JWT"}</p></li>
<li><p>第二部分：Payload(有效载荷），携带一些自定义信息、默认信息等。
例如：{"id":"1","username":"Tom"}</p></li>
<li><p>第三部分：Signature(签名），防止Token被篡改、确保安全性。将header、payload，并加入指定秘钥，通过指定签名算法计算而来。</p></li>
</ul>
<blockquote>
<p>签名的目的就是为了防jwt令牌被篡改，而正是因为jwt令牌最后一个部分数字签名的存在，所以整个jwt
令牌是非常安全可靠的。一旦jwt令牌当中任何一个部分、任何一个字符被篡改了，整个令牌在校验的时候都会失败，所以它是非常安全可靠的。</p>
<p>JWT通过 base64编码将 JSON格式数据转为字符串</p>
</blockquote>
<p>JWT令牌最典型的应用场景就是登录认证：</p>
<ol type="1">
<li>在浏览器发起请求来执行登录操作，此时会访问登录的接口，如果登录成功之后，我们需要生成一个jwt令牌，将生成的
jwt令牌返回给前端。</li>
<li>前端拿到jwt令牌之后，会将jwt令牌存储起来。在后续的每一次请求中都会将jwt令牌携带到服务端。</li>
<li>服务端统一拦截请求之后，先来判断一下这次请求有没有把令牌带过来，如果没有带过来，直接拒绝访问，如果带过来了，还要校验一下令牌是否是有效。如果有效，就直接放行进行请求的处理。</li>
</ol>
<h4 id="统一拦截技术">统一拦截技术</h4>
<h5 id="filter">Filter</h5>
<ul>
<li>Filter表示过滤器，是
JavaWeb三大组件(Servlet、Filter、Listener)之一。</li>
<li>过滤器可以把对资源的请求拦截下来，从而实现一些特殊的功能
<ul>
<li>使用了过滤器之后，要想访问web服务器上的资源，必须先经过滤器，过滤器处理完毕之后，才可以访问对应的资源。</li>
</ul></li>
<li>过滤器一般完成一些通用的操作，比如：登录校验、统一编码处理、敏感字符处理等。</li>
</ul>
<h5 id="interceptor">Interceptor</h5>
<ul>
<li>Interceptor
表示拦截器，是一种动态拦截方法调用的机制，类似于过滤器。</li>
<li>拦截器是Spring框架中提供的，用来动态拦截控制器方法的执行。</li>
</ul>
<p>拦截器的作用：</p>
<ul>
<li>拦截请求，在指定方法调用前后，根据业务需要执行预先设定的代码。</li>
</ul>
<p>总的流程如下所示，其中Spring的Web环境中提供了一个非常核心的Servlet：DispatcherServlet（前端控制器），所有请求都会先进行到DispatcherServlet，再将请求转给Controller。</p>
<p><img data-src="Java_Web/image-20231113191220858.png" alt="image-20231113191220858"></p>
<h3 id="全局异常处理">全局异常处理</h3>
<p>简单来说就是定义一个全局异常处理器统筹处理三层结构中的异常。</p>
<p>怎么样定义全局异常处理器？</p>
<ul>
<li>定义全局异常处理器非常简单，就是定义一个类，在类上加上一个注解@RestControllerAdvice，加上这个注解就代表我们定义了一个全局异常处理器。</li>
<li>在全局异常处理器当中，需要定义一个方法来捕获异常，在这个方法上需要加上注解@ExceptionHandler。通过@ExceptionHandler注解当中的value属性来指定我们要捕获的是哪一类型的异常。</li>
</ul>
<h3 id="aop">AOP</h3>
<p>AOP英文全称：Aspect Oriented
Programming（面向切面编程、面向方面编程），即面向特定方法编程。</p>
<p>AOP的作用：在程序运行期间在不修改源代码的基础上对已有方法进行增强（无侵入性:
解耦）。</p>
<p>AOP的主流实现方式就是动态代理。Spring的AOP是Spring框架的高级技术，旨在管理bean对象的过程中底层使用动态代理机制，对特定的方法进行编程(功能增强)。常见的应用场景如下：</p>
<ul>
<li>记录系统的操作日志</li>
<li>权限控制</li>
<li>事务管理：我们前面所讲解的Spring事务管理，底层其实也是通过AOP来实现的，只要添加@Transactional注解之后，AOP程序自动会在原始方法运行前先来开启事务，在原始方法运行完毕之后提交或回滚事务</li>
</ul>
<p>AOP面向切面编程的一些优势：</p>
<ul>
<li><p>代码无侵入：没有修改原始的业务方法，就已经对原始的业务方法进行了功能的增强或者是功能的改变</p></li>
<li><p>减少了重复代码</p></li>
<li><p>提高开发效率</p></li>
<li><p>维护方便</p></li>
</ul>
<p>核心概念：</p>
<ol type="1">
<li><strong>连接点：JoinPoint</strong>，可以被AOP控制的方法（暗含方法执行时的相关信息）</li>
<li><strong>通知：Advice</strong>，指哪些重复的逻辑，也就是共性功能（最终体现为一个方法）
<ul>
<li>就是动态代理做了些什么事情</li>
</ul></li>
<li><strong>切入点：PointCut</strong>，匹配连接点的条件，通知仅会在切入点方法执行时被应用
<ul>
<li>就是筛选条件，指示目标方法是哪些，是一个类似正则的表达式</li>
</ul></li>
<li><strong>切面：Aspect</strong>，描述通知与切入点的对应关系（通知+切入点）</li>
<li><strong>目标对象：Target</strong>，通知所应用的对象</li>
</ol>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>MeteorDream
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://meteordream.github.io/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/Java_Web.html" title="Java Web 后端总述">https://meteordream.github.io/编程基础/2023-11/Java_Web.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <div>
        
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">--- ♥ end ♥ ---</div>
    
</div>
        
      </div>
        

  <div class="followme">
    <p>欢迎关注我呀~</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/images/wechat_channel.jpg">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://github.com/MeteorDream">
            <span class="icon">
              <i class="fab fa-github"></i>
            </span>

            <span class="label">GitHub</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://leetcode-cn.com/u/meteordream/">
            <span class="icon">
              <i class="fab fa-envira"></i>
            </span>

            <span class="label">LeetCode</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Paper/2023-10/Multi-Level%20Attention.html" rel="prev" title="『论文笔记』CNNs with Multi-Level Attention for Domain Generalization">
      <i class="fa fa-chevron-left"></i> 『论文笔记』CNNs with Multi-Level Attention for Domain Generalization
    </a></div>
      <div class="post-nav-item">
    <a href="/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/2023-11/GolandBasic.html" rel="next" title="Go 基础">
      Go 基础 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          梦境概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%A6%81"><span class="nav-number">2.</span> <span class="nav-text">概要</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E9%83%A8%E5%88%86"><span class="nav-number">3.</span> <span class="nav-text">前端部分</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vue"><span class="nav-number">3.1.</span> <span class="nav-text">Vue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ajax"><span class="nav-number">3.2.</span> <span class="nav-text">AJAX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2"><span class="nav-number">3.3.</span> <span class="nav-text">部署</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.</span> <span class="nav-text">接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">项目管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#springboot"><span class="nav-number">6.</span> <span class="nav-text">SpringBoot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">6.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#web%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">6.2.</span> <span class="nav-text">Web服务器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="nav-number">6.3.</span> <span class="nav-text">三层架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%B1%82%E8%A7%A3%E8%80%A6"><span class="nav-number">6.4.</span> <span class="nav-text">分层解耦</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="nav-number">6.5.</span> <span class="nav-text">数据操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C"><span class="nav-number">6.6.</span> <span class="nav-text">登录校验</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF"><span class="nav-number">6.6.1.</span> <span class="nav-text">会话技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%9F%E4%B8%80%E6%8B%A6%E6%88%AA%E6%8A%80%E6%9C%AF"><span class="nav-number">6.6.2.</span> <span class="nav-text">统一拦截技术</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#filter"><span class="nav-number">6.6.2.1.</span> <span class="nav-text">Filter</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#interceptor"><span class="nav-number">6.6.2.2.</span> <span class="nav-text">Interceptor</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">6.7.</span> <span class="nav-text">全局异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#aop"><span class="nav-number">6.8.</span> <span class="nav-text">AOP</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="小鲸鱼"
      src="/images/shizuku.png">
  <p class="site-author-name" itemprop="name">小鲸鱼</p>
  <div class="site-description" itemprop="description">小鲸鱼只有七秒钟的记忆</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">233</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">94</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/MeteorDream" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MeteorDream" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hy1368068258@163.com" title="E-Mail → mailto:hy1368068258@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://meteordream.github.io/" title="感谢 → https:&#x2F;&#x2F;meteordream.github.io"><i class="fa fa-kiss-wink-heart fa-fw"></i>感谢</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://leetcode.cn/u/meteordream/" title="LeetCode → https:&#x2F;&#x2F;leetcode.cn&#x2F;u&#x2F;meteordream&#x2F;" rel="noopener" target="_blank"><i class="fab fa-envira fa-fw"></i>LeetCode</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021-04 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小鲸鱼</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">1.3m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">20:16</span>
</div><script color="0,0,255" opacity="0.6" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js">
</script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.bootcdn.net/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>


  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'n9rYOoqPd5IsOQpuSgyY7ci3-gzGzoHsz',
      appKey     : '0BuiiqBGewzAwktQnJ9vXQMB',
      placeholder: "想和小鲸鱼说些什么吗~ (评论区支持MarkDown语法哦~)",
      avatar     : 'mp',
      meta       : guest,
      pageSize   : '20' || 10,
      visitor    : false,
      lang       : 'zh-CN' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/assets/koharu.model.json"},"display":{"superSample":2,"width":200,"height":400,"position":"right","hOffset":30,"vOffset":-30},"mobile":{"show":true,"opacity":0.5,"scale":0.3},"react":{"opacity":0.7,"opacityOnHover":0.2},"log":false});</script></body>

  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/clicklove.js"></script>

</html>
